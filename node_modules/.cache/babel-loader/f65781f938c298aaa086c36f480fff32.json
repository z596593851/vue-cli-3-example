{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/picker/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/picker/index.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import _typeof from \"/Users/apple/code/js/vue-cli-3-example/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Scroller from \"./scroller\";\nimport { Flexbox, FlexboxItem } from \"../flexbox\";\nimport Manager from \"./chain\";\nimport value2name from \"../../filters/value2name\";\nimport isArray from \"../../libs/is-array\";\nexport default {\n  name: 'picker',\n  components: {\n    Flexbox: Flexbox,\n    FlexboxItem: FlexboxItem\n  },\n  created: function created() {\n    if (this.columns !== 0) {\n      var length = this.columns;\n      this.store = new Manager(this.data, length, this.fixedColumns || this.columns);\n      this.currentData = this.store.getColumns(this.value);\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.uuid = Math.random().toString(36).substring(3, 8);\n    this.$nextTick(function () {\n      _this2.render(_this2.currentData, _this2.currentValue);\n    });\n  },\n  props: {\n    data: Array,\n    columns: {\n      type: Number,\n      default: 0\n    },\n    fixedColumns: {\n      type: Number,\n      default: 0\n    },\n    value: Array,\n    itemClass: {\n      type: String,\n      default: 'scroller-item'\n    },\n    columnWidth: Array\n  },\n  methods: {\n    getNameValues: function getNameValues() {\n      return value2name(this.currentValue, this.data);\n    },\n    getId: function getId(i) {\n      return \"#vux-picker-\".concat(this.uuid, \"-\").concat(i);\n    },\n    render: function render(data, value) {\n      this.count = this.currentData.length;\n\n      var _this = this;\n\n      if (!data || !data.length) {\n        return;\n      }\n\n      var count = this.currentData.length; // set first item as value\n\n      if (value.length < count) {\n        for (var i = 0; i < count; i++) {\n          if (process.env.NODE_ENV === 'development' && typeof data[i][0] === 'undefined' && isArray(this.data) && this.data[0] && typeof this.data[0].value !== 'undefined' && !this.columns) {\n            console.error('[VUX error] 渲染出错，如果为联动模式，需要指定 columns(列数)');\n          }\n\n          this.$set(_this.currentValue, i, data[i][0].value || data[i][0]);\n        }\n      }\n\n      var _loop = function _loop(_i) {\n        /**\n        * Still don't know why this happens\n        */\n        if (!document.querySelector(_this.getId(_i))) {\n          return {\n            v: void 0\n          };\n        }\n\n        _this.scroller[_i] && _this.scroller[_i].destroy();\n        _this.scroller[_i] = new Scroller(_this.getId(_i), {\n          data: data[_i],\n          defaultValue: value[_i] || data[_i][0].value,\n          itemClass: _this.itemClass,\n          onSelect: function onSelect(value) {\n            _this.$set(_this.currentValue, _i, value);\n\n            if (!this.columns || this.columns && _this.getValue().length === _this.store.count) {\n              _this.$nextTick(function () {\n                _this.$emit('on-change', _this.getValue());\n              });\n            }\n\n            if (_this.columns !== 0) {\n              _this.renderChain(_i + 1);\n            }\n          }\n        });\n\n        if (_this.currentValue) {\n          _this.scroller[_i].select(value[_i]);\n        }\n      };\n\n      for (var _i = 0; _i < data.length; _i++) {\n        var _ret = _loop(_i);\n\n        if (_typeof(_ret) === \"object\") return _ret.v;\n      }\n    },\n    renderChain: function renderChain(i) {\n      if (!this.columns) {\n        return;\n      } // do not render for last scroller\n\n\n      if (i > this.count - 1) {\n        return;\n      }\n\n      var _this = this;\n\n      var ID = this.getId(i); // destroy old one\n\n      this.scroller[i].destroy();\n      var list = this.store.getChildren(_this.getValue()[i - 1]);\n      this.scroller[i] = new Scroller(ID, {\n        data: list,\n        itemClass: _this.item_class,\n        onSelect: function onSelect(value) {\n          _this.$set(_this.currentValue, i, value);\n\n          _this.$nextTick(function () {\n            _this.$emit('on-change', _this.getValue());\n          });\n\n          _this.renderChain(i + 1);\n        }\n      }); // list is Array(empty) as maybe\n\n      if (list.length) {\n        this.$set(this.currentValue, i, list[0].value);\n        this.renderChain(i + 1);\n      } else {\n        this.$set(this.currentValue, i, null);\n      }\n    },\n    getValue: function getValue() {\n      var data = [];\n\n      for (var i = 0; i < this.currentData.length; i++) {\n        if (this.scroller[i]) {\n          data.push(this.scroller[i].value);\n        } else {\n          return [];\n        }\n      }\n\n      return data;\n    },\n    emitValueChange: function emitValueChange(val) {\n      if (!this.columns || this.columns && val.length === this.store.count) {\n        this.$emit('on-change', val);\n      }\n    }\n  },\n  data: function data() {\n    return {\n      scroller: [],\n      count: 0,\n      uuid: '',\n      currentData: this.data,\n      currentValue: this.value\n    };\n  },\n  watch: {\n    value: function value(val) {\n      if (JSON.stringify(val) !== JSON.stringify(this.currentValue)) {\n        this.currentValue = val;\n      }\n    },\n    currentValue: function currentValue(val, oldVal) {\n      this.$emit('input', val); // render all the scroller for chain datas\n\n      if (this.columns !== 0) {\n        if (val.length > 0) {\n          if (JSON.stringify(val) !== JSON.stringify(oldVal)) {\n            this.currentData = this.store.getColumns(val);\n            this.$nextTick(function () {\n              this.render(this.currentData, val);\n            });\n          }\n        } else {\n          this.render(this.currentData, []);\n        }\n      } else {\n        if (val.length) {\n          for (var i = 0; i < val.length; i++) {\n            if (this.scroller[i] && this.scroller[i].value !== val[i]) {\n              this.scroller[i].select(val[i]);\n            }\n          }\n        } else {\n          this.render(this.currentData, []);\n        }\n      }\n    },\n    data: function data(val) {\n      if (JSON.stringify(val) !== JSON.stringify(this.currentData)) {\n        this.currentData = val;\n      }\n    },\n    currentData: function currentData(newData) {\n      var _this3 = this;\n\n      if (Object.prototype.toString.call(newData[0]) === '[object Array]') {\n        this.$nextTick(function () {\n          _this3.render(newData, _this3.currentValue); // emit on-change after rerender\n\n\n          _this3.$nextTick(function () {\n            _this3.emitValueChange(_this3.getValue());\n\n            if (JSON.stringify(_this3.getValue()) !== JSON.stringify(_this3.currentValue)) {\n              if (!_this3.columns || _this3.columns && _this3.getValue().length === _this3.store.count) {\n                _this3.currentValue = _this3.getValue();\n              }\n            }\n          });\n        });\n      } else {\n        if (this.columns !== 0) {\n          if (!newData.length) {\n            return;\n          }\n\n          var length = this.columns;\n          this.store = new Manager(newData, length, this.fixedColumns || this.columns);\n          this.currentData = this.store.getColumns(this.currentValue);\n        }\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    for (var i = 0; i < this.count; i++) {\n      this.scroller[i] && this.scroller[i].destroy();\n      this.scroller[i] = null;\n    }\n  }\n};",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/picker/index.vue"],"names":["Scroller","Flexbox","FlexboxItem","Manager","value2name","isArray","name","components","created","columns","length","store","data","fixedColumns","currentData","getColumns","value","mounted","uuid","Math","random","toString","substring","$nextTick","render","currentValue","props","Array","type","Number","default","itemClass","String","columnWidth","methods","getNameValues","getId","i","count","_this","process","env","NODE_ENV","console","error","$set","document","querySelector","scroller","destroy","defaultValue","onSelect","getValue","$emit","renderChain","select","ID","list","getChildren","item_class","push","emitValueChange","val","watch","JSON","stringify","oldVal","newData","Object","prototype","call","beforeDestroy"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Scroller from './scroller'\nimport { Flexbox, FlexboxItem } from '../flexbox'\nimport Manager from './chain'\nimport value2name from '../../filters/value2name'\nimport isArray from '../../libs/is-array'\n\nexport default {\n  name: 'picker',\n  components: {\n    Flexbox,\n    FlexboxItem\n  },\n  created () {\n    if (this.columns !== 0) {\n      const length = this.columns\n      this.store = new Manager(this.data, length, this.fixedColumns || this.columns)\n      this.currentData = this.store.getColumns(this.value)\n    }\n  },\n  mounted () {\n    this.uuid = Math.random().toString(36).substring(3, 8)\n    this.$nextTick(() => {\n      this.render(this.currentData, this.currentValue)\n    })\n  },\n  props: {\n    data: Array,\n    columns: {\n      type: Number,\n      default: 0\n    },\n    fixedColumns: {\n      type: Number,\n      default: 0\n    },\n    value: Array,\n    itemClass: {\n      type: String,\n      default: 'scroller-item'\n    },\n    columnWidth: Array\n  },\n  methods: {\n    getNameValues () {\n      return value2name(this.currentValue, this.data)\n    },\n    getId (i) {\n      return `#vux-picker-${this.uuid}-${i}`\n    },\n    render (data, value) {\n      this.count = this.currentData.length\n      const _this = this\n      if (!data || !data.length) {\n        return\n      }\n      let count = this.currentData.length\n      // set first item as value\n      if (value.length < count) {\n        for (let i = 0; i < count; i++) {\n          if (process.env.NODE_ENV === 'development' &&\n            typeof data[i][0] === 'undefined' &&\n            isArray(this.data) &&\n            this.data[0] &&\n            typeof this.data[0].value !== 'undefined' &&\n            !this.columns) {\n            console.error('[VUX error] 渲染出错，如果为联动模式，需要指定 columns(列数)')\n          }\n          this.$set(_this.currentValue, i, data[i][0].value || data[i][0])\n        }\n      }\n\n      for (let i = 0; i < data.length; i++) {\n        /**\n        * Still don't know why this happens\n        */\n        if (!document.querySelector(_this.getId(i))) {\n          return\n        }\n\n        _this.scroller[i] && _this.scroller[i].destroy()\n        _this.scroller[i] = new Scroller(_this.getId(i), {\n          data: data[i],\n          defaultValue: value[i] || data[i][0].value,\n          itemClass: _this.itemClass,\n          onSelect (value) {\n            _this.$set(_this.currentValue, i, value)\n            if (!this.columns || (this.columns && _this.getValue().length === _this.store.count)) {\n              _this.$nextTick(() => {\n                _this.$emit('on-change', _this.getValue())\n              })\n            }\n            if (_this.columns !== 0) {\n              _this.renderChain(i + 1)\n            }\n          }\n        })\n        if (_this.currentValue) {\n          _this.scroller[i].select(value[i])\n        }\n      }\n    },\n    renderChain (i) {\n      if (!this.columns) {\n        return\n      }\n\n      // do not render for last scroller\n      if (i > this.count - 1) {\n        return\n      }\n\n      const _this = this\n      let ID = this.getId(i)\n      // destroy old one\n      this.scroller[i].destroy()\n      let list = this.store.getChildren(_this.getValue()[i - 1])\n      this.scroller[i] = new Scroller(ID, {\n        data: list,\n        itemClass: _this.item_class,\n        onSelect (value) {\n          _this.$set(_this.currentValue, i, value)\n          _this.$nextTick(() => {\n            _this.$emit('on-change', _this.getValue())\n          })\n          _this.renderChain(i + 1)\n        }\n      })\n      // list is Array(empty) as maybe\n      if (list.length) {\n        this.$set(this.currentValue, i, list[0].value)\n        this.renderChain(i + 1)\n      } else {\n        this.$set(this.currentValue, i, null)\n      }\n    },\n    getValue () {\n      let data = []\n      for (let i = 0; i < this.currentData.length; i++) {\n        if (this.scroller[i]) {\n          data.push(this.scroller[i].value)\n        } else {\n          return []\n        }\n      }\n      return data\n    },\n    emitValueChange (val) {\n      if (!this.columns || (this.columns && val.length === this.store.count)) {\n        this.$emit('on-change', val)\n      }\n    }\n  },\n  data () {\n    return {\n      scroller: [],\n      count: 0,\n      uuid: '',\n      currentData: this.data,\n      currentValue: this.value\n    }\n  },\n  watch: {\n    value (val) {\n      if (JSON.stringify(val) !== JSON.stringify(this.currentValue)) {\n        this.currentValue = val\n      }\n    },\n    currentValue (val, oldVal) {\n      this.$emit('input', val)\n      // render all the scroller for chain datas\n      if (this.columns !== 0) {\n        if (val.length > 0) {\n          if (JSON.stringify(val) !== JSON.stringify(oldVal)) {\n            this.currentData = this.store.getColumns(val)\n            this.$nextTick(function () {\n              this.render(this.currentData, val)\n            })\n          }\n        } else {\n          this.render(this.currentData, [])\n        }\n      } else {\n        if (val.length) {\n          for (let i = 0; i < val.length; i++) {\n            if (this.scroller[i] && this.scroller[i].value !== val[i]) {\n              this.scroller[i].select(val[i])\n            }\n          }\n        } else {\n          this.render(this.currentData, [])\n        }\n      }\n    },\n    data (val) {\n      if (JSON.stringify(val) !== JSON.stringify(this.currentData)) {\n        this.currentData = val\n      }\n    },\n    currentData (newData) {\n      if (Object.prototype.toString.call(newData[0]) === '[object Array]') {\n        this.$nextTick(() => {\n          this.render(newData, this.currentValue)\n          // emit on-change after rerender\n          this.$nextTick(() => {\n            this.emitValueChange(this.getValue())\n\n            if (JSON.stringify(this.getValue()) !== JSON.stringify(this.currentValue)) {\n              if (!this.columns || (this.columns && this.getValue().length === this.store.count)) {\n                this.currentValue = this.getValue()\n              }\n            }\n          })\n        })\n      } else {\n        if (this.columns !== 0) {\n          if (!newData.length) {\n            return\n          }\n          const length = this.columns\n          this.store = new Manager(newData, length, this.fixedColumns || this.columns)\n          this.currentData = this.store.getColumns(this.currentValue)\n        }\n      }\n    }\n  },\n  beforeDestroy () {\n    for (let i = 0; i < this.count; i++) {\n      this.scroller[i] && this.scroller[i].destroy()\n      this.scroller[i] = null\n    }\n  }\n}\n"]}]}