{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/datetime/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/datetime/index.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Icon from \"../icon\";\nimport Picker from \"./datetimepicker\";\nimport Group from \"../group\";\nimport InlineDesc from \"../inline-desc\";\nimport Uuid from \"../../mixins/uuid\";\nimport _format from \"../../tools/date/format\";\nexport default {\n  name: 'datetime',\n  mixins: [Uuid],\n  components: {\n    Group: Group,\n    InlineDesc: InlineDesc,\n    Icon: Icon\n  },\n  props: {\n    format: {\n      type: String,\n      default: 'YYYY-MM-DD',\n      validator: function validator(val) {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV === 'development' && val && /A/.test(val) && val !== 'YYYY-MM-DD A') {\n          return console.error('[VUX] Datetime prop:format 使用 A 时只允许的值为： YYYY-MM-DD A');\n        }\n\n        return true;\n      }\n    },\n    title: String,\n    value: {\n      type: String,\n      default: ''\n    },\n    inlineDesc: String,\n    placeholder: String,\n    minYear: Number,\n    maxYear: Number,\n    confirmText: String,\n    cancelText: String,\n    clearText: String,\n    yearRow: {\n      type: String,\n      default: '{value}'\n    },\n    monthRow: {\n      type: String,\n      default: '{value}'\n    },\n    dayRow: {\n      type: String,\n      default: '{value}'\n    },\n    hourRow: {\n      type: String,\n      default: '{value}'\n    },\n    minuteRow: {\n      type: String,\n      default: '{value}'\n    },\n    required: {\n      type: Boolean,\n      default: false\n    },\n    minHour: {\n      type: Number,\n      default: 0\n    },\n    maxHour: {\n      type: Number,\n      default: 23\n    },\n    startDate: {\n      type: String,\n      validator: function validator(val) {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV === 'development' && val && val.length !== 10) {\n          console.error('[VUX] Datetime prop:start-date 必须为 YYYY-MM-DD 格式');\n        }\n\n        return val ? val.length === 10 : true;\n      }\n    },\n    endDate: {\n      type: String,\n      validator: function validator(val) {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV === 'development' && val && val.length !== 10) {\n          console.error('[VUX] Datetime prop:end-date 必须为 YYYY-MM-DD 格式');\n        }\n\n        return val ? val.length === 10 : true;\n      }\n    },\n    valueTextAlign: String,\n    displayFormat: Function,\n    readonly: Boolean,\n    hourList: Array,\n    minuteList: Array,\n    show: Boolean,\n    defaultSelectedValue: String,\n    computeHoursFunction: Function,\n    computeDaysFunction: Function,\n    orderMap: Object\n  },\n  created: function created() {\n    this.isFirstSetValue = false;\n    this.currentValue = this.value;\n  },\n  data: function data() {\n    return {\n      currentShow: false,\n      currentValue: null,\n      valid: true,\n      errors: {}\n    };\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    var uuid = this.uuid;\n    this.$el.setAttribute('id', \"vux-datetime-\".concat(uuid));\n\n    if (!this.readonly) {\n      this.$nextTick(function () {\n        _this2.render();\n\n        if (_this2.show) {\n          _this2.$nextTick(function () {\n            _this2.picker && _this2.picker.show(_this2.currentValue);\n          });\n        }\n      });\n    }\n  },\n  computed: {\n    styles: function styles() {\n      if (!this.$parent) {\n        return {};\n      }\n\n      return {\n        width: this.$parent.labelWidth,\n        textAlign: this.$parent.labelAlign,\n        marginRight: this.$parent.labelMarginRight\n      };\n    },\n    pickerOptions: function pickerOptions() {\n      var _this = this;\n\n      var options = {\n        trigger: '#vux-datetime-' + this.uuid,\n        format: this.format,\n        value: this.currentValue,\n        output: '.vux-datetime-value',\n        confirmText: _this.getButtonText('confirm'),\n        cancelText: _this.getButtonText('cancel'),\n        clearText: _this.clearText,\n        yearRow: this.yearRow,\n        monthRow: this.monthRow,\n        dayRow: this.dayRow,\n        hourRow: this.hourRow,\n        minuteRow: this.minuteRow,\n        minHour: this.minHour,\n        maxHour: this.maxHour,\n        startDate: this.startDate,\n        endDate: this.endDate,\n        hourList: this.hourList,\n        minuteList: this.minuteList,\n        defaultSelectedValue: this.defaultSelectedValue,\n        computeHoursFunction: this.computeHoursFunction,\n        computeDaysFunction: this.computeDaysFunction,\n        orderMap: this.orderMap || {},\n        onSelect: function onSelect(type, val, wholeValue) {\n          if (_this.picker && _this.picker.config.renderInline) {\n            _this.$emit('input', wholeValue);\n\n            _this.$emit('on-change', wholeValue);\n          }\n        },\n        onConfirm: function onConfirm(value) {\n          _this.currentValue = value;\n        },\n        onClear: function onClear(value) {\n          _this.$emit('on-clear', value);\n        },\n        onHide: function onHide(type) {\n          _this.currentShow = false;\n\n          _this.$emit('update:show', false);\n\n          _this.validate();\n\n          _this.$emit('on-hide', type);\n\n          if (type === 'cancel') {\n            _this.$emit('on-cancel');\n          }\n\n          if (type === 'confirm') {\n            setTimeout(function () {\n              _this.$nextTick(function () {\n                _this.$emit('on-confirm', _this.value);\n              });\n            });\n          }\n        },\n        onShow: function onShow() {\n          _this.currentShow = true;\n\n          _this.$emit('update:show', true);\n\n          _this.$emit('on-show');\n        }\n      };\n\n      if (this.minYear) {\n        options.minYear = this.minYear;\n      }\n\n      if (this.maxYear) {\n        options.maxYear = this.maxYear;\n      }\n\n      return options;\n    },\n    firstError: function firstError() {\n      var key = Object.keys(this.errors)[0];\n      return this.errors[key];\n    },\n    labelClass: function labelClass() {\n      if (!this.$parent) {\n        return {};\n      }\n\n      return {\n        'vux-cell-justify': this.$parent.labelAlign === 'justify' || this.$parent.$parent.labelAlign === 'justify'\n      };\n    }\n  },\n  methods: {\n    getButtonText: function getButtonText(type) {\n      if (type === 'cancel' && this.cancelText) {\n        return this.cancelText;\n      } else if (type === 'confirm' && this.confirmText) {\n        return this.confirmText;\n      }\n\n      return this.$el.getAttribute(\"data-\".concat(type, \"-text\"));\n    },\n    render: function render() {\n      var _this3 = this;\n\n      this.$nextTick(function () {\n        _this3.picker && _this3.picker.destroy();\n        _this3.picker = new Picker(_this3.pickerOptions);\n      });\n    },\n    validate: function validate() {\n      if (!this.currentValue && this.required) {\n        this.valid = false;\n        this.errors.required = '必填';\n        return;\n      }\n\n      this.valid = true;\n      this.errors = {};\n    }\n  },\n  watch: {\n    readonly: function readonly(val) {\n      if (val) {\n        this.picker && this.picker.destroy();\n      } else {\n        this.render();\n      }\n    },\n    show: function show(val) {\n      if (val === this.currentShow) return;\n\n      if (val) {\n        this.picker && this.picker.show(this.currentValue);\n      } else {\n        this.picker && this.picker.hide(this.currentValue);\n      }\n    },\n    currentValue: function currentValue(val, oldVal) {\n      this.$emit('input', val);\n\n      if (!this.isFirstSetValue) {\n        this.isFirstSetValue = true;\n        oldVal && this.$emit('on-change', val);\n      } else {\n        this.$emit('on-change', val);\n      }\n\n      this.validate();\n    },\n    startDate: function startDate() {\n      this.render();\n    },\n    endDate: function endDate() {\n      this.render();\n    },\n    format: function format(val) {\n      if (this.currentValue) {\n        this.currentValue = _format(this.currentValue, val);\n      }\n\n      this.render();\n    },\n    value: function value(val) {\n      // do not force render when renderInline is true\n      if (this.readonly || this.picker && this.picker.config.renderInline) {\n        this.currentValue = val;\n        return;\n      }\n\n      if (this.currentValue !== val) {\n        this.currentValue = val;\n        this.render();\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.picker && this.picker.destroy();\n  }\n};",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/datetime/index.vue"],"names":["Icon","Picker","Group","InlineDesc","Uuid","format","name","mixins","components","props","type","String","default","validator","val","process","env","NODE_ENV","test","console","error","title","value","inlineDesc","placeholder","minYear","Number","maxYear","confirmText","cancelText","clearText","yearRow","monthRow","dayRow","hourRow","minuteRow","required","Boolean","minHour","maxHour","startDate","length","endDate","valueTextAlign","displayFormat","Function","readonly","hourList","Array","minuteList","show","defaultSelectedValue","computeHoursFunction","computeDaysFunction","orderMap","Object","created","isFirstSetValue","currentValue","data","currentShow","valid","errors","mounted","uuid","$el","setAttribute","$nextTick","render","picker","computed","styles","$parent","width","labelWidth","textAlign","labelAlign","marginRight","labelMarginRight","pickerOptions","_this","options","trigger","output","getButtonText","onSelect","wholeValue","config","renderInline","$emit","onConfirm","onClear","onHide","validate","setTimeout","onShow","firstError","key","keys","labelClass","methods","getAttribute","destroy","watch","hide","oldVal","beforeDestroy"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Icon from '../icon'\nimport Picker from './datetimepicker'\nimport Group from '../group'\nimport InlineDesc from '../inline-desc'\nimport Uuid from '../../mixins/uuid'\nimport format from '../../tools/date/format'\n\nexport default {\n  name: 'datetime',\n  mixins: [Uuid],\n  components: {\n    Group,\n    InlineDesc,\n    Icon\n  },\n  props: {\n    format: {\n      type: String,\n      default: 'YYYY-MM-DD',\n      validator (val) {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV === 'development' && val && /A/.test(val) && val !== 'YYYY-MM-DD A') {\n          return console.error('[VUX] Datetime prop:format 使用 A 时只允许的值为： YYYY-MM-DD A')\n        }\n        return true\n      }\n    },\n    title: String,\n    value: {\n      type: String,\n      default: ''\n    },\n    inlineDesc: String,\n    placeholder: String,\n    minYear: Number,\n    maxYear: Number,\n    confirmText: String,\n    cancelText: String,\n    clearText: String,\n    yearRow: {\n      type: String,\n      default: '{value}'\n    },\n    monthRow: {\n      type: String,\n      default: '{value}'\n    },\n    dayRow: {\n      type: String,\n      default: '{value}'\n    },\n    hourRow: {\n      type: String,\n      default: '{value}'\n    },\n    minuteRow: {\n      type: String,\n      default: '{value}'\n    },\n    required: {\n      type: Boolean,\n      default: false\n    },\n    minHour: {\n      type: Number,\n      default: 0\n    },\n    maxHour: {\n      type: Number,\n      default: 23\n    },\n    startDate: {\n      type: String,\n      validator (val) {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV === 'development' && val && val.length !== 10) {\n          console.error('[VUX] Datetime prop:start-date 必须为 YYYY-MM-DD 格式')\n        }\n        return val ? val.length === 10 : true\n      }\n    },\n    endDate: {\n      type: String,\n      validator (val) {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV === 'development' && val && val.length !== 10) {\n          console.error('[VUX] Datetime prop:end-date 必须为 YYYY-MM-DD 格式')\n        }\n        return val ? val.length === 10 : true\n      }\n    },\n    valueTextAlign: String,\n    displayFormat: Function,\n    readonly: Boolean,\n    hourList: Array,\n    minuteList: Array,\n    show: Boolean,\n    defaultSelectedValue: String,\n    computeHoursFunction: Function,\n    computeDaysFunction: Function,\n    orderMap: Object\n  },\n  created () {\n    this.isFirstSetValue = false\n    this.currentValue = this.value\n  },\n  data () {\n    return {\n      currentShow: false,\n      currentValue: null,\n      valid: true,\n      errors: {}\n    }\n  },\n  mounted () {\n    const uuid = this.uuid\n    this.$el.setAttribute('id', `vux-datetime-${uuid}`)\n    if (!this.readonly) {\n      this.$nextTick(() => {\n        this.render()\n\n        if (this.show) {\n          this.$nextTick(() => {\n            this.picker && this.picker.show(this.currentValue)\n          })\n        }\n      })\n    }\n  },\n  computed: {\n    styles () {\n      if (!this.$parent) {\n        return {}\n      }\n      return {\n        width: this.$parent.labelWidth,\n        textAlign: this.$parent.labelAlign,\n        marginRight: this.$parent.labelMarginRight\n      }\n    },\n    pickerOptions () {\n      const _this = this\n      const options = {\n        trigger: '#vux-datetime-' + this.uuid,\n        format: this.format,\n        value: this.currentValue,\n        output: '.vux-datetime-value',\n        confirmText: _this.getButtonText('confirm'),\n        cancelText: _this.getButtonText('cancel'),\n        clearText: _this.clearText,\n        yearRow: this.yearRow,\n        monthRow: this.monthRow,\n        dayRow: this.dayRow,\n        hourRow: this.hourRow,\n        minuteRow: this.minuteRow,\n        minHour: this.minHour,\n        maxHour: this.maxHour,\n        startDate: this.startDate,\n        endDate: this.endDate,\n        hourList: this.hourList,\n        minuteList: this.minuteList,\n        defaultSelectedValue: this.defaultSelectedValue,\n        computeHoursFunction: this.computeHoursFunction,\n        computeDaysFunction: this.computeDaysFunction,\n        orderMap: this.orderMap || {},\n        onSelect (type, val, wholeValue) {\n          if (_this.picker && _this.picker.config.renderInline) {\n            _this.$emit('input', wholeValue)\n            _this.$emit('on-change', wholeValue)\n          }\n        },\n        onConfirm (value) {\n          _this.currentValue = value\n        },\n        onClear (value) {\n          _this.$emit('on-clear', value)\n        },\n        onHide (type) {\n          _this.currentShow = false\n          _this.$emit('update:show', false)\n          _this.validate()\n          _this.$emit('on-hide', type)\n          if (type === 'cancel') {\n            _this.$emit('on-cancel')\n          }\n          if (type === 'confirm') {\n            setTimeout(() => {\n              _this.$nextTick(() => {\n                _this.$emit('on-confirm', _this.value)\n              })\n            })\n          }\n        },\n        onShow () {\n          _this.currentShow = true\n          _this.$emit('update:show', true)\n          _this.$emit('on-show')\n        }\n      }\n      if (this.minYear) {\n        options.minYear = this.minYear\n      }\n      if (this.maxYear) {\n        options.maxYear = this.maxYear\n      }\n      return options\n    },\n    firstError () {\n      let key = Object.keys(this.errors)[0]\n      return this.errors[key]\n    },\n    labelClass () {\n      if (!this.$parent) {\n        return {}\n      }\n      return {\n        'vux-cell-justify': this.$parent.labelAlign === 'justify' || this.$parent.$parent.labelAlign === 'justify'\n      }\n    }\n  },\n  methods: {\n    getButtonText (type) {\n      if (type === 'cancel' && this.cancelText) {\n        return this.cancelText\n      } else if (type === 'confirm' && this.confirmText) {\n        return this.confirmText\n      }\n      return this.$el.getAttribute(`data-${type}-text`)\n    },\n    render () {\n      this.$nextTick(() => {\n        this.picker && this.picker.destroy()\n        this.picker = new Picker(this.pickerOptions)\n      })\n    },\n    validate () {\n      if (!this.currentValue && this.required) {\n        this.valid = false\n        this.errors.required = '必填'\n        return\n      }\n      this.valid = true\n      this.errors = {}\n    }\n  },\n  watch: {\n    readonly (val) {\n      if (val) {\n        this.picker && this.picker.destroy()\n      } else {\n        this.render()\n      }\n    },\n    show (val) {\n      if (val === this.currentShow) return\n      if (val) {\n        this.picker && this.picker.show(this.currentValue)\n      } else {\n        this.picker && this.picker.hide(this.currentValue)\n      }\n    },\n    currentValue (val, oldVal) {\n      this.$emit('input', val)\n      if (!this.isFirstSetValue) {\n        this.isFirstSetValue = true\n        oldVal && this.$emit('on-change', val)\n      } else {\n        this.$emit('on-change', val)\n      }\n      this.validate()\n    },\n    startDate () {\n      this.render()\n    },\n    endDate () {\n      this.render()\n    },\n    format (val) {\n      if (this.currentValue) {\n        this.currentValue = format(this.currentValue, val)\n      }\n      this.render()\n    },\n    value (val) {\n      // do not force render when renderInline is true\n      if (this.readonly || (this.picker && this.picker.config.renderInline)) {\n        this.currentValue = val\n        return\n      }\n      if (this.currentValue !== val) {\n        this.currentValue = val\n        this.render()\n      }\n    }\n  },\n  beforeDestroy () {\n    this.picker && this.picker.destroy()\n  }\n}\n"]}]}