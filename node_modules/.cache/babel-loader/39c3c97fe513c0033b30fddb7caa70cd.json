{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/qrcode/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/qrcode/index.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport QRCodeImpl from 'qr.js/lib/QRCode';\nimport ErrorCorrectLevel from 'qr.js/lib/ErrorCorrectLevel';\nexport default {\n  name: 'qrcode',\n  props: {\n    value: String,\n    size: {\n      type: Number,\n      default: 160\n    },\n    level: {\n      type: String,\n      default: 'L'\n    },\n    bgColor: {\n      type: String,\n      default: '#FFFFFF'\n    },\n    fgColor: {\n      type: String,\n      default: '#000000'\n    },\n    type: {\n      type: String,\n      default: 'img'\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.render();\n    });\n  },\n  data: function data() {\n    return {\n      imgData: ''\n    };\n  },\n  watch: {\n    value: function value() {\n      this.render();\n    },\n    size: function size() {\n      this.render();\n    },\n    level: function level() {\n      this.render();\n    },\n    bgColor: function bgColor() {\n      this.render();\n    },\n    fgColor: function fgColor() {\n      this.render();\n    }\n  },\n  methods: {\n    render: function render() {\n      var _this2 = this;\n\n      if (typeof this.value === 'undefined') {\n        return;\n      }\n\n      var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[this.level]);\n      qrcode.addData(utf16to8(this.value));\n      qrcode.make();\n      var canvas = this.$refs.canvas;\n      var ctx = canvas.getContext('2d');\n      var cells = qrcode.modules;\n      var tileW = this.size / cells.length;\n      var tileH = this.size / cells.length;\n      var scale = (window.devicePixelRatio || 1) / getBackingStorePixelRatio(ctx);\n      canvas.height = canvas.width = this.size * scale;\n      ctx.scale(scale, scale);\n      cells.forEach(function (row, rdx) {\n        row.forEach(function (cell, cdx) {\n          ctx.fillStyle = cell ? _this2.fgColor : _this2.bgColor;\n          var w = Math.ceil((cdx + 1) * tileW) - Math.floor(cdx * tileW);\n          var h = Math.ceil((rdx + 1) * tileH) - Math.floor(rdx * tileH);\n          ctx.fillRect(Math.round(cdx * tileW), Math.round(rdx * tileH), w, h);\n        });\n      });\n\n      if (this.type === 'img') {\n        this.imgData = canvas.toDataURL('image/png');\n      }\n    }\n  }\n};\n\nfunction getBackingStorePixelRatio(ctx) {\n  return ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n}\n\nfunction utf16to8(str) {\n  var out, i, len, c;\n  out = '';\n  len = str.length;\n\n  for (i = 0; i < len; i++) {\n    c = str.charCodeAt(i);\n\n    if (c >= 0x0001 && c <= 0x007F) {\n      out += str.charAt(i);\n    } else if (c > 0x07FF) {\n      out += String.fromCharCode(0xE0 | c >> 12 & 0x0F);\n      out += String.fromCharCode(0x80 | c >> 6 & 0x3F);\n      out += String.fromCharCode(0x80 | c >> 0 & 0x3F);\n    } else {\n      out += String.fromCharCode(0xC0 | c >> 6 & 0x1F);\n      out += String.fromCharCode(0x80 | c >> 0 & 0x3F);\n    }\n  }\n\n  return out;\n}",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/qrcode/index.vue"],"names":["QRCodeImpl","ErrorCorrectLevel","name","props","value","String","size","type","Number","default","level","bgColor","fgColor","mounted","$nextTick","render","data","imgData","watch","methods","qrcode","addData","utf16to8","make","canvas","$refs","ctx","getContext","cells","modules","tileW","length","tileH","scale","window","devicePixelRatio","getBackingStorePixelRatio","height","width","forEach","row","rdx","cell","cdx","fillStyle","w","Math","ceil","floor","h","fillRect","round","toDataURL","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","str","out","i","len","c","charCodeAt","charAt","fromCharCode"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport QRCodeImpl from 'qr.js/lib/QRCode'\nimport ErrorCorrectLevel from 'qr.js/lib/ErrorCorrectLevel'\n\nexport default {\n  name: 'qrcode',\n  props: {\n    value: String,\n    size: {\n      type: Number,\n      default: 160\n    },\n    level: {\n      type: String,\n      default: 'L'\n    },\n    bgColor: {\n      type: String,\n      default: '#FFFFFF'\n    },\n    fgColor: {\n      type: String,\n      default: '#000000'\n    },\n    type: {\n      type: String,\n      default: 'img'\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      this.render()\n    })\n  },\n  data () {\n    return {\n      imgData: ''\n    }\n  },\n  watch: {\n    value () {\n      this.render()\n    },\n    size () {\n      this.render()\n    },\n    level () {\n      this.render()\n    },\n    bgColor () {\n      this.render()\n    },\n    fgColor () {\n      this.render()\n    }\n  },\n  methods: {\n    render () {\n      if (typeof this.value === 'undefined') {\n        return\n      }\n\n      const qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[this.level])\n      qrcode.addData(utf16to8(this.value))\n      qrcode.make()\n\n      const canvas = this.$refs.canvas\n\n      const ctx = canvas.getContext('2d')\n      const cells = qrcode.modules\n      const tileW = this.size / cells.length\n      const tileH = this.size / cells.length\n      const scale = (window.devicePixelRatio || 1) / getBackingStorePixelRatio(ctx)\n      canvas.height = canvas.width = this.size * scale\n      ctx.scale(scale, scale)\n\n      cells.forEach((row, rdx) => {\n        row.forEach((cell, cdx) => {\n          ctx.fillStyle = cell ? this.fgColor : this.bgColor\n          const w = (Math.ceil((cdx + 1) * tileW) - Math.floor(cdx * tileW))\n          const h = (Math.ceil((rdx + 1) * tileH) - Math.floor(rdx * tileH))\n          ctx.fillRect(Math.round(cdx * tileW), Math.round(rdx * tileH), w, h)\n        })\n      })\n      if (this.type === 'img') {\n        this.imgData = canvas.toDataURL('image/png')\n      }\n    }\n  }\n}\n\nfunction getBackingStorePixelRatio (ctx) {\n  return (\n    ctx.webkitBackingStorePixelRatio ||\n    ctx.mozBackingStorePixelRatio ||\n    ctx.msBackingStorePixelRatio ||\n    ctx.oBackingStorePixelRatio ||\n    ctx.backingStorePixelRatio ||\n    1\n  )\n}\n\nfunction utf16to8 (str) {\n  var out, i, len, c\n  out = ''\n  len = str.length\n  for (i = 0; i < len; i++) {\n    c = str.charCodeAt(i)\n    if ((c >= 0x0001) && (c <= 0x007F)) {\n      out += str.charAt(i)\n    } else if (c > 0x07FF) {\n      out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F))\n      out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F))\n      out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F))\n    } else {\n      out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F))\n      out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F))\n    }\n  }\n  return out\n}\n"]}]}