{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/swipeout/swipeout-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/swipeout/swipeout-item.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'swipeout-item',\n  props: {\n    sensitivity: {\n      type: Number,\n      default: 0\n    },\n    autoCloseOnButtonClick: {\n      type: Boolean,\n      default: true\n    },\n    disabled: Boolean,\n    threshold: {\n      type: Number,\n      default: 0.3\n    },\n    underlayColor: String,\n    transitionMode: {\n      type: String,\n      default: 'reveal'\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.render();\n    });\n  },\n  methods: {\n    render: function render() {\n      this.target = this.$refs.content;\n\n      if (this.$slots['left-menu']) {\n        this.hasLeftMenu = true;\n        this.caculateMenuWidth('left');\n      }\n\n      if (this.$slots['right-menu']) {\n        this.hasRightMenu = true;\n        this.caculateMenuWidth('right');\n      }\n    },\n    caculateMenuWidth: function caculateMenuWidth(direction) {\n      var list = this.$slots[\"\".concat(direction, \"-menu\")][0].children.filter(function (one) {\n        return one.tag;\n      });\n      var width = 0;\n      list.forEach(function (one) {\n        var propsData = one.componentOptions ? one.componentOptions.propsData : {};\n        width += propsData.width || 80;\n      });\n      this[\"\".concat(direction, \"MenuWidth\")] = width;\n    },\n    onContentClick: function onContentClick() {\n      if (this.styles.transform.indexOf('(0px, 0, 0)') === -1) {\n        this._setClose(200);\n      }\n    },\n    onItemClick: function onItemClick() {\n      if (this.autoCloseOnButtonClick) {\n        this._setClose();\n      }\n    },\n    start: function start(ev) {\n      if (this.disabled || this.isOpen || ev.target.nodeName.toLowerCase() === 'button') {\n        return;\n      }\n\n      if (this.$parent.$options._componentTag === 'swipeout') {\n        var openItems = this.$parent.$children.filter(function (item) {\n          return item.$data.styles.transform.indexOf('(0px, 0, 0)') === -1;\n        });\n\n        if (openItems.length > 0) {\n          openItems.forEach(function (item) {\n            item.setOffset(0, true);\n          });\n          ev.preventDefault();\n          return;\n        }\n      }\n\n      var touch = ev.touches ? ev.touches[0] : ev;\n      this.pageX = touch.pageX;\n      this.pageY = touch.pageY;\n    },\n    move: function move(ev) {\n      if (this.disabled) {\n        return;\n      }\n\n      if (ev.target.nodeName.toLowerCase() === 'button') {\n        ev.preventDefault();\n        return;\n      }\n\n      if (this.pageX === undefined) {\n        ev.preventDefault();\n        return;\n      }\n\n      var touch = ev.touches ? ev.touches[0] : ev;\n      this.distX = touch.pageX - this.pageX;\n      this.distY = touch.pageY - this.pageY;\n\n      if (!this.direction) {\n        this.direction = this.distX > 0 ? 'left' : 'right';\n      }\n\n      if (this.direction === 'right' && this.distX > 0 && this.hasRightMenu || this.direction === 'left' && this.distX < 0 && this.hasLeftMenu) {\n        this.valid = true;\n        ev.preventDefault();\n      }\n\n      if (this.valid === undefined) {\n        if (this.distX > 0 && this.hasLeftMenu === false) {\n          this.valid = false;\n        } else if (this.distX < 0 && this.hasRightMenu === false) {\n          this.valid = false;\n        } else if (Math.abs(this.distX) > this.sensitivity || Math.abs(this.distY) > this.sensitivity) {\n          this.valid = Math.abs(this.distX) > Math.abs(this.distY);\n        } else {\n          ev.preventDefault();\n        }\n      }\n\n      if (this.valid === true) {\n        if (Math.abs(this.distX) <= this.menuWidth) {\n          this.setOffset(this.distX, false);\n        } else {\n          var extra = (Math.abs(this.distX) - this.menuWidth) * 0.5;\n          var offset = (this.menuWidth + extra) * (this.distX < 0 ? -1 : 1);\n          this.setOffset(offset, false);\n        }\n\n        ev.preventDefault();\n      }\n    },\n    end: function end(ev) {\n      if (this.disabled) {\n        return;\n      }\n\n      if (ev.target.nodeName.toLowerCase() === 'button') {\n        return;\n      }\n\n      if (this.valid === true) {\n        if (this.distX < 0 && this.direction === 'right') {\n          var threshold = this.threshold <= 1 ? this.rightMenuWidth * this.threshold : this.threshold;\n\n          if (this.distX < -threshold) {\n            this.setOffset(-this.rightMenuWidth, true);\n            this.$emit('on-open');\n            this.isOpen = true;\n          } else {\n            this._setClose();\n          }\n        } else if (this.distX > 0 && this.direction === 'left') {\n          var _threshold = this.threshold <= 1 ? this.leftMenuWidth * this.threshold : this.threshold;\n\n          if (this.distX > _threshold) {\n            this.setOffset(this.leftMenuWidth, true);\n            this.$emit('on-open');\n            this.isOpen = true;\n          } else {\n            this._setClose();\n          }\n        }\n      } else if (this.pageX !== undefined) {}\n\n      this.pageX = this.pageY = this.valid = undefined;\n      this.direction = '';\n    },\n    setOffset: function setOffset(x) {\n      var _this2 = this;\n\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var force = arguments.length > 2 ? arguments[2] : undefined;\n      this.isAnimated = animated;\n\n      if (this.disabled && !force) {\n        return;\n      }\n\n      if (this.direction === 'right' && x > 0 || this.direction === 'left' && x < 0) {\n        x = 0;\n      }\n\n      if (x === 0) {\n        setTimeout(function () {\n          _this2.isOpen = false;\n        }, 300);\n      }\n\n      if (x < 0 && Math.abs(x) === this.rightMenuWidth) {\n        this.distX = -this.rightMenuWidth;\n      } else if (x > 0 && Math.abs(x) === this.leftMenuWidth) {\n        this.distX = this.leftMenuWidth;\n      }\n\n      if (animated && this.target) {\n        this.target && this.target.classList.add('vux-swipeout-content-animated');\n\n        var cb = function (self, target) {\n          return function () {\n            target.classList.remove('vux-swipeout-content-animated');\n            self.isAnimated = false;\n            target.removeEventListener('webkitTransitionEnd', cb);\n            target.removeEventListener('transitionend', cb);\n          };\n        }(this, this.target);\n\n        this.target.addEventListener('webkitTransitionEnd', cb);\n        this.target.addEventListener('transitionend', cb);\n      }\n\n      this.styles.transform = 'translate3d(' + x + 'px, 0, 0)';\n    },\n    _setClose: function _setClose() {\n      var _this3 = this;\n\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.setOffset(0, true);\n      this.$emit('on-close');\n\n      if (!delay) {\n        this.isOpen = false;\n      } else {\n        setTimeout(function () {\n          _this3.isOpen = false;\n        }, delay);\n      }\n\n      this.distX = 0;\n    },\n    open: function open() {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'right';\n      this.setOffset(position === 'right' ? -this.rightMenuWidth : this.leftMenuWidth, true, true);\n    },\n    close: function close() {\n      this.setOffset(0, true, true);\n    }\n  },\n  computed: {\n    menuWidth: function menuWidth() {\n      if (!this.hasLeftMenu && this.hasRightMenu) {\n        return this.rightMenuWidth;\n      }\n\n      if (this.hasLeftMenu && !this.hasRightMenu) {\n        return this.leftMenuWidth;\n      }\n\n      if (this.hasLeftMenu && this.hasRightMenu) {\n        return this.distX < 0 ? this.rightMenuWidth : this.leftMenuWidth;\n      }\n    },\n    buttonBoxStyle: function buttonBoxStyle() {\n      return {\n        backgroundColor: this.underlayColor\n      };\n    },\n    leftButtonBoxStyle: function leftButtonBoxStyle() {\n      var styles = JSON.parse(JSON.stringify(this.buttonBoxStyle));\n\n      if (this.transitionMode === 'follow') {\n        var offset = this.styles.transform.indexOf('(0px, 0, 0)') === -1 ? this.leftMenuWidth - this.distX : this.leftMenuWidth;\n        styles.transform = \"translate3d(-\".concat(offset, \"px, 0, 0)\");\n      }\n\n      return styles;\n    },\n    rightButtonBoxStyle: function rightButtonBoxStyle() {\n      var styles = JSON.parse(JSON.stringify(this.buttonBoxStyle));\n\n      if (this.transitionMode === 'follow') {\n        var offset = this.styles.transform.indexOf('(0px, 0, 0)') === -1 ? this.rightMenuWidth - Math.abs(this.distX) : this.rightMenuWidth;\n\n        if (offset < 0) {\n          offset = 0;\n        }\n\n        if (this.isAnimated) {\n          styles.transition = 'transform 0.2s';\n        }\n\n        styles.transform = \"translate3d(\".concat(offset, \"px, 0, 0)\");\n      }\n\n      return styles;\n    }\n  },\n  data: function data() {\n    return {\n      pageX: undefined,\n      pageY: undefined,\n      distX: 0,\n      distY: 0,\n      hasLeftMenu: false,\n      hasRightMenu: false,\n      animated: false,\n      isAnimated: false,\n      isOpen: false,\n      styles: {\n        transform: 'translate3d(0px, 0, 0)'\n      },\n      direction: '',\n      leftMenuWidth: 160,\n      rightMenuWidth: 160\n    };\n  },\n  watch: {\n    disabled: function disabled(newVal, oldVal) {\n      if (newVal === true && !oldVal) {\n        this.setOffset(0, true, true);\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/swipeout/swipeout-item.vue"],"names":["name","props","sensitivity","type","Number","default","autoCloseOnButtonClick","Boolean","disabled","threshold","underlayColor","String","transitionMode","mounted","$nextTick","render","methods","target","$refs","content","$slots","hasLeftMenu","caculateMenuWidth","hasRightMenu","direction","list","children","filter","one","tag","width","forEach","propsData","componentOptions","onContentClick","styles","transform","indexOf","_setClose","onItemClick","start","ev","isOpen","nodeName","toLowerCase","$parent","$options","_componentTag","openItems","$children","item","$data","length","setOffset","preventDefault","touch","touches","pageX","pageY","move","undefined","distX","distY","valid","Math","abs","menuWidth","extra","offset","end","rightMenuWidth","$emit","leftMenuWidth","x","animated","force","isAnimated","setTimeout","classList","add","cb","self","remove","removeEventListener","addEventListener","delay","open","position","close","computed","buttonBoxStyle","backgroundColor","leftButtonBoxStyle","JSON","parse","stringify","rightButtonBoxStyle","transition","data","watch","newVal","oldVal"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'swipeout-item',\n  props: {\n    sensitivity: {\n      type: Number,\n      default: 0\n    },\n    autoCloseOnButtonClick: {\n      type: Boolean,\n      default: true\n    },\n    disabled: Boolean,\n    threshold: {\n      type: Number,\n      default: 0.3\n    },\n    underlayColor: String,\n    transitionMode: {\n      type: String,\n      default: 'reveal'\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      this.render()\n    })\n  },\n  methods: {\n    render () {\n      this.target = this.$refs.content\n      if (this.$slots['left-menu']) {\n        this.hasLeftMenu = true\n        this.caculateMenuWidth('left')\n      }\n      if (this.$slots['right-menu']) {\n        this.hasRightMenu = true\n        this.caculateMenuWidth('right')\n      }\n    },\n    caculateMenuWidth (direction) {\n      const list = this.$slots[`${direction}-menu`][0].children.filter(one => one.tag)\n      let width = 0\n      list.forEach(one => {\n        const propsData = one.componentOptions ? one.componentOptions.propsData : {}\n        width += propsData.width || 80\n      })\n      this[`${direction}MenuWidth`] = width\n    },\n    onContentClick () {\n      if (this.styles.transform.indexOf('(0px, 0, 0)') === -1) {\n        this._setClose(200)\n      }\n    },\n    onItemClick () {\n      if (this.autoCloseOnButtonClick) {\n        this._setClose()\n      }\n    },\n    start (ev) {\n      if (this.disabled || this.isOpen || ev.target.nodeName.toLowerCase() === 'button') {\n        return\n      }\n      if (this.$parent.$options._componentTag === 'swipeout') {\n        const openItems = this.$parent.$children.filter(item => item.$data.styles.transform.indexOf('(0px, 0, 0)') === -1)\n        if (openItems.length > 0) {\n          openItems.forEach(item => {\n            item.setOffset(0, true)\n          })\n          ev.preventDefault()\n          return\n        }\n      }\n      const touch = ev.touches ? ev.touches[0] : ev\n      this.pageX = touch.pageX\n      this.pageY = touch.pageY\n    },\n    move (ev) {\n      if (this.disabled) {\n        return\n      }\n      if (ev.target.nodeName.toLowerCase() === 'button') {\n        ev.preventDefault()\n        return\n      }\n      if (this.pageX === undefined) {\n        ev.preventDefault()\n        return\n      }\n\n      const touch = ev.touches ? ev.touches[0] : ev\n      this.distX = touch.pageX - this.pageX\n      this.distY = touch.pageY - this.pageY\n\n      if (!this.direction) {\n        this.direction = this.distX > 0 ? 'left' : 'right'\n      }\n\n      if ((this.direction === 'right' && this.distX > 0 && this.hasRightMenu) || (this.direction === 'left' && this.distX < 0 && this.hasLeftMenu)) {\n        this.valid = true\n        ev.preventDefault()\n      }\n\n      if (this.valid === undefined) {\n        if (this.distX > 0 && this.hasLeftMenu === false) {\n          this.valid = false\n        } else if (this.distX < 0 && this.hasRightMenu === false) {\n          this.valid = false\n        } else if (Math.abs(this.distX) > this.sensitivity || Math.abs(this.distY) > this.sensitivity) {\n          this.valid = Math.abs(this.distX) > Math.abs(this.distY)\n        } else {\n          ev.preventDefault()\n        }\n      }\n\n      if (this.valid === true) {\n        if (Math.abs(this.distX) <= this.menuWidth) {\n          this.setOffset(this.distX, false)\n        } else {\n          const extra = (Math.abs(this.distX) - this.menuWidth) * 0.5\n          const offset = (this.menuWidth + extra) * (this.distX < 0 ? -1 : 1)\n          this.setOffset(offset, false)\n        }\n        ev.preventDefault()\n      }\n    },\n    end (ev) {\n      if (this.disabled) {\n        return\n      }\n      if (ev.target.nodeName.toLowerCase() === 'button') {\n        return\n      }\n      if (this.valid === true) {\n        if (this.distX < 0 && this.direction === 'right') {\n          const threshold = this.threshold <= 1 ? this.rightMenuWidth * this.threshold : this.threshold\n\n          if (this.distX < -threshold) {\n            this.setOffset(-this.rightMenuWidth, true)\n            this.$emit('on-open')\n            this.isOpen = true\n          } else {\n            this._setClose()\n          }\n        } else if (this.distX > 0 && this.direction === 'left') {\n          const threshold = this.threshold <= 1 ? this.leftMenuWidth * this.threshold : this.threshold\n\n          if (this.distX > threshold) {\n            this.setOffset(this.leftMenuWidth, true)\n            this.$emit('on-open')\n            this.isOpen = true\n          } else {\n            this._setClose()\n          }\n        }\n      } else if (this.pageX !== undefined) {}\n\n      this.pageX = this.pageY = this.valid = undefined\n      this.direction = ''\n    },\n    setOffset (x, animated = false, force) {\n      this.isAnimated = animated\n      if (this.disabled && !force) {\n        return\n      }\n      if ((this.direction === 'right' && x > 0) || (this.direction === 'left' && x < 0)) {\n        x = 0\n      }\n\n      if (x === 0) {\n        setTimeout(() => {\n          this.isOpen = false\n        }, 300)\n      }\n\n      if (x < 0 && Math.abs(x) === this.rightMenuWidth) {\n        this.distX = -this.rightMenuWidth\n      } else if (x > 0 && Math.abs(x) === this.leftMenuWidth) {\n        this.distX = this.leftMenuWidth\n      }\n      if (animated && this.target) {\n        this.target && this.target.classList.add('vux-swipeout-content-animated')\n        var cb = (function (self, target) {\n          return function () {\n            target.classList.remove('vux-swipeout-content-animated')\n            self.isAnimated = false\n            target.removeEventListener('webkitTransitionEnd', cb)\n            target.removeEventListener('transitionend', cb)\n          }\n        })(this, this.target)\n\n        this.target.addEventListener('webkitTransitionEnd', cb)\n        this.target.addEventListener('transitionend', cb)\n      }\n      this.styles.transform = 'translate3d(' + x + 'px, 0, 0)'\n    },\n    _setClose (delay = 0) {\n      this.setOffset(0, true)\n      this.$emit('on-close')\n      if (!delay) {\n        this.isOpen = false\n      } else {\n        setTimeout(() => {\n          this.isOpen = false\n        }, delay)\n      }\n      this.distX = 0\n    },\n    open (position = 'right') {\n      this.setOffset(position === 'right' ? -this.rightMenuWidth : this.leftMenuWidth, true, true)\n    },\n    close () {\n      this.setOffset(0, true, true)\n    }\n  },\n  computed: {\n    menuWidth () {\n      if (!this.hasLeftMenu && this.hasRightMenu) {\n        return this.rightMenuWidth\n      }\n      if (this.hasLeftMenu && !this.hasRightMenu) {\n        return this.leftMenuWidth\n      }\n      if (this.hasLeftMenu && this.hasRightMenu) {\n        return this.distX < 0 ? this.rightMenuWidth : this.leftMenuWidth\n      }\n    },\n    buttonBoxStyle () {\n      return {\n        backgroundColor: this.underlayColor\n      }\n    },\n    leftButtonBoxStyle () {\n      let styles = JSON.parse(JSON.stringify(this.buttonBoxStyle))\n      if (this.transitionMode === 'follow') {\n        let offset = this.styles.transform.indexOf('(0px, 0, 0)') === -1 ? this.leftMenuWidth - this.distX : this.leftMenuWidth\n        styles.transform = `translate3d(-${offset}px, 0, 0)`\n      }\n      return styles\n    },\n    rightButtonBoxStyle () {\n      let styles = JSON.parse(JSON.stringify(this.buttonBoxStyle))\n      if (this.transitionMode === 'follow') {\n        let offset = this.styles.transform.indexOf('(0px, 0, 0)') === -1 ? this.rightMenuWidth - Math.abs(this.distX) : this.rightMenuWidth\n        if (offset < 0) {\n          offset = 0\n        }\n        if (this.isAnimated) {\n          styles.transition = 'transform 0.2s'\n        }\n        styles.transform = `translate3d(${offset}px, 0, 0)`\n      }\n      return styles\n    }\n  },\n  data () {\n    return {\n      pageX: undefined,\n      pageY: undefined,\n      distX: 0,\n      distY: 0,\n      hasLeftMenu: false,\n      hasRightMenu: false,\n      animated: false,\n      isAnimated: false,\n      isOpen: false,\n      styles: {\n        transform: 'translate3d(0px, 0, 0)'\n      },\n      direction: '',\n      leftMenuWidth: 160,\n      rightMenuWidth: 160\n    }\n  },\n  watch: {\n    disabled (newVal, oldVal) {\n      if (newVal === true && !oldVal) {\n        this.setOffset(0, true, true)\n      }\n    }\n  }\n}\n"]}]}