{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/x-input/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/x-input/index.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Base from \"../../libs/base\";\nimport Icon from \"../icon\";\nimport Toast from \"../toast\";\nimport InlineDesc from \"../inline-desc\";\nimport isEmail from 'validator/lib/isEmail';\nimport isMobilePhone from 'validator/lib/isMobilePhone';\nimport Debounce from \"../../tools/debounce\";\nimport mask from 'vanilla-masker';\nvar validators = {\n  'email': {\n    fn: isEmail,\n    msg: '邮箱格式'\n  },\n  'china-mobile': {\n    fn: function fn(str) {\n      return isMobilePhone(str, 'zh-CN');\n    },\n    msg: '手机号码'\n  },\n  'china-name': {\n    fn: function fn(str) {\n      return str.length >= 2 && str.length <= 6;\n    },\n    msg: '中文姓名'\n  }\n};\nexport default {\n  name: 'x-input',\n  created: function created() {\n    var _this = this;\n\n    this.currentValue = this.value === undefined || this.value === null ? '' : this.mask ? this.maskValue(this.value) : this.value;\n    /* istanbul ignore if */\n\n    if (process.env.NODE_ENV === 'development') {\n      if (!this.title && !this.placeholder && !this.currentValue) {\n        console.warn('no title and no placeholder?');\n      }\n    }\n\n    if (this.required && (typeof this.currentValue === 'undefined' || this.currentValue === '')) {\n      this.valid = false;\n    }\n\n    this.handleChangeEvent = true;\n\n    if (this.debounce) {\n      this._debounce = Debounce(function () {\n        _this.$emit('on-change', _this.currentValue);\n      }, this.debounce);\n    }\n  },\n  beforeMount: function beforeMount() {\n    if (this.$slots && this.$slots['restricted-label']) {\n      this.hasRestrictedLabel = true;\n    }\n\n    if (this.$slots && this.$slots['right-full-height']) {\n      this.hasRightFullHeightSlot = true;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this._debounce) {\n      this._debounce.cancel();\n    }\n\n    window.removeEventListener('resize', this.scrollIntoView);\n  },\n  mixins: [Base],\n  components: {\n    Icon: Icon,\n    InlineDesc: InlineDesc,\n    Toast: Toast\n  },\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'text'\n    },\n    placeholder: String,\n    value: [String, Number],\n    name: String,\n    readonly: Boolean,\n    disabled: Boolean,\n    keyboard: String,\n    inlineDesc: String,\n    isType: [String, Function],\n    min: Number,\n    max: Number,\n    showClear: {\n      type: Boolean,\n      default: true\n    },\n    equalWith: String,\n    textAlign: String,\n    // https://github.com/yisibl/blog/issues/3\n    autocomplete: {\n      type: String,\n      default: 'off'\n    },\n    autocapitalize: {\n      type: String,\n      default: 'off'\n    },\n    autocorrect: {\n      type: String,\n      default: 'off'\n    },\n    spellcheck: {\n      type: String,\n      default: 'false'\n    },\n    novalidate: {\n      type: Boolean,\n      default: false\n    },\n    iconType: String,\n    debounce: Number,\n    placeholderAlign: String,\n    labelWidth: String,\n    mask: String,\n    shouldToastError: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    labelStyles: function labelStyles() {\n      var _this$$parent = this.$parent,\n          $parent = _this$$parent === void 0 ? {} : _this$$parent;\n      return {\n        width: this.labelWidthComputed || $parent.labelWidth || this.labelWidthComputed,\n        textAlign: $parent.labelAlign,\n        marginRight: $parent.labelMarginRight\n      };\n    },\n    labelClass: function labelClass() {\n      return {\n        'vux-cell-justify': this.$parent && (this.$parent.labelAlign === 'justify' || this.$parent.$parent.labelAlign === 'justify')\n      };\n    },\n    pattern: function pattern() {\n      if (this.keyboard === 'number' || this.isType === 'china-mobile') {\n        return '[0-9]*';\n      }\n    },\n    labelWidthComputed: function labelWidthComputed() {\n      var width = this.title.replace(/[^x00-xff]/g, '00').length / 2 + 1;\n\n      if (width < 10) {\n        return width + 'em';\n      }\n    },\n    hasErrors: function hasErrors() {\n      return Object.keys(this.errors).length > 0;\n    },\n    inputStyle: function inputStyle() {\n      if (this.textAlign) {\n        return {\n          textAlign: this.textAlign\n        };\n      }\n    },\n    showWarn: function showWarn() {\n      return !this.novalidate && !this.equalWith && !this.valid && this.firstError && (this.touched || this.forceShowError);\n    }\n  },\n  mounted: function mounted() {\n    window.addEventListener('resize', this.scrollIntoView);\n  },\n  methods: {\n    scrollIntoView: function scrollIntoView() {\n      var _this2 = this;\n\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      // alert('scroll into view')\n      if (/iphone/i.test(navigator.userAgent)) {// return\n      }\n\n      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\n        // alert('will scroll')\n        setTimeout(function () {\n          // alert(this.$refs.input.length)\n          _this2.$refs.input.scrollIntoViewIfNeeded(true);\n        }, time);\n      }\n    },\n    onClickErrorIcon: function onClickErrorIcon() {\n      if (this.shouldToastError && this.firstError) {\n        this.showErrorToast = true;\n      }\n\n      this.$emit('on-click-error-icon', this.firstError);\n    },\n    maskValue: function maskValue(val) {\n      var val1 = this.mask ? mask.toPattern(val, this.mask) : val;\n      return val1;\n    },\n    reset: function reset() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.dirty = false;\n      this.currentValue = value;\n      this.firstError = '';\n      this.valid = true;\n    },\n    clear: function clear() {\n      this.currentValue = '';\n      this.focus();\n      this.$emit('on-click-clear-icon');\n    },\n    focus: function focus() {\n      this.$refs.input.focus();\n    },\n    blur: function blur() {\n      this.$refs.input.blur();\n    },\n    focusHandler: function focusHandler($event) {\n      var _this3 = this;\n\n      this.$emit('on-focus', this.currentValue, $event);\n      this.isFocus = true; // this.scrollIntoView(500)\n      // this.scrollIntoView(5000)\n\n      setTimeout(function () {\n        // 因为有1秒的延迟，如果切换了页面，input已经不存在，所以加个判断\n        !_this3.$refs.input || _this3.$refs.input.scrollIntoViewIfNeeded(false); // this.$refs.input.scrollIntoViewIfNeeded()\n      }, 1000); // $event.target.\n    },\n    onBlur: function onBlur($event) {\n      this.setTouched();\n      this.validate();\n      this.isFocus = false;\n      this.$emit('on-blur', this.currentValue, $event);\n    },\n    onKeyUp: function onKeyUp(e) {\n      if (e.key === 'Enter') {\n        e.target.blur();\n        this.$emit('on-enter', this.currentValue, e);\n      }\n    },\n    getError: function getError() {\n      var key = Object.keys(this.errors)[0];\n      this.firstError = this.errors[key];\n    },\n    validate: function validate() {\n      if (typeof this.equalWith !== 'undefined') {\n        this.validateEqual();\n        return;\n      }\n\n      this.errors = {};\n\n      if (!this.currentValue && !this.required) {\n        this.valid = true;\n        return;\n      }\n\n      if (!this.currentValue && this.required) {\n        this.valid = false;\n        this.errors.required = '必填哦';\n        this.getError();\n        return;\n      }\n\n      if (typeof this.isType === 'string') {\n        var validator = validators[this.isType];\n\n        if (validator) {\n          var value = this.currentValue;\n\n          if (this.isType === 'china-mobile' && this.mask === '999 9999 9999') {\n            value = this.currentValue.replace(/\\s+/g, '');\n          }\n\n          this.valid = validator['fn'](value);\n\n          if (!this.valid) {\n            this.forceShowError = true;\n            this.errors.format = validator['msg'] + '格式不对哦~';\n            this.getError();\n            return;\n          } else {\n            delete this.errors.format;\n          }\n        }\n      }\n\n      if (typeof this.isType === 'function') {\n        var validStatus = this.isType(this.currentValue);\n        this.valid = validStatus.valid;\n\n        if (!this.valid) {\n          this.errors.format = validStatus.msg;\n          this.forceShowError = true;\n          this.getError();\n          return;\n        } else {\n          delete this.errors.format;\n        }\n      }\n\n      if (this.min) {\n        if (this.currentValue.length < this.min) {\n          this.errors.min = \"\\u6700\\u5C11\\u5E94\\u8BE5\\u8F93\\u5165\".concat(this.min, \"\\u4E2A\\u5B57\\u7B26\\u54E6\");\n          this.valid = false;\n          this.getError();\n          return;\n        } else {\n          delete this.errors.min;\n        }\n      }\n\n      if (this.max) {\n        if (this.currentValue.length > this.max) {\n          this.errors.max = \"\\u6700\\u591A\\u53EF\\u4EE5\\u8F93\\u5165\".concat(this.max, \"\\u4E2A\\u5B57\\u7B26\\u54E6\");\n          this.valid = false;\n          this.forceShowError = true;\n          return;\n        } else {\n          this.forceShowError = false;\n          delete this.errors.max;\n        }\n      }\n\n      this.valid = true;\n    },\n    validateEqual: function validateEqual() {\n      if (!this.equalWith && this.currentValue) {\n        this.valid = false;\n        this.errors.equal = '输入不一致';\n        return;\n      }\n\n      var willCheck = this.dirty || this.currentValue.length >= this.equalWith.length; // 只在长度符合时显示正确与否\n\n      if (willCheck && this.currentValue !== this.equalWith) {\n        this.valid = false;\n        this.errors.equal = '输入不一致';\n        return;\n      } else {\n        if (!this.currentValue && this.required) {\n          this.valid = false;\n        } else {\n          this.valid = true;\n          delete this.errors.equal;\n        }\n      }\n    },\n    // #2810\n    _getInputMaskSelection: function _getInputMaskSelection(selection, direction, maskVal, loop) {\n      if (!this.mask || loop && direction === 0) {\n        return selection;\n      }\n\n      if (direction === 0) {\n        direction = this.lastDirection;\n      }\n\n      if (direction > 0) {\n        var maskChar = this.mask.substr(selection - direction, 1);\n\n        if (!maskChar.match(/[9SA]/)) {\n          return this._getInputMaskSelection(selection + 1, direction, maskVal, true);\n        }\n      }\n\n      return selection;\n    }\n  },\n  data: function data() {\n    return {\n      hasRightFullHeightSlot: false,\n      hasRestrictedLabel: false,\n      firstError: '',\n      forceShowError: false,\n      hasLengthEqual: false,\n      valid: true,\n      currentValue: '',\n      showErrorToast: false,\n      isFocus: false\n    };\n  },\n  watch: {\n    mask: function mask(val) {\n      if (val && this.currentValue) {\n        this.currentValue = this.maskValue(this.currentValue);\n      }\n    },\n    valid: function valid() {\n      this.getError();\n    },\n    value: function value(val) {\n      this.currentValue = val;\n    },\n    equalWith: function equalWith(newVal) {\n      if (newVal && this.equalWith) {\n        if (newVal.length === this.equalWith.length) {\n          this.hasLengthEqual = true;\n        }\n\n        this.validateEqual();\n      } else {\n        this.validate();\n      }\n    },\n    currentValue: function currentValue(newVal, oldVal) {\n      var _this4 = this;\n\n      var selection = null;\n\n      if (!this.equalWith && newVal) {\n        this.validateEqual();\n      }\n\n      if (newVal && this.equalWith) {\n        if (newVal.length === this.equalWith.length) {\n          this.hasLengthEqual = true;\n        }\n\n        this.validateEqual();\n      } else {\n        this.validate();\n      } // #2960\n\n\n      try {\n        selection = this.$refs.input.selectionStart;\n        var direction = newVal.length - oldVal.length;\n        selection = this._getInputMaskSelection(selection, direction, this.maskValue(newVal));\n        this.lastDirection = direction;\n      } catch (e) {}\n\n      this.$emit('input', this.maskValue(newVal)); // #2810\n\n      this.$nextTick(function () {\n        if (_this4.$refs.input.selectionStart !== selection) {\n          _this4.$refs.input.selectionStart = selection;\n          _this4.$refs.input.selectionEnd = selection;\n        }\n\n        if (_this4.currentValue !== _this4.maskValue(newVal)) {\n          _this4.currentValue = _this4.maskValue(newVal);\n        }\n      });\n\n      if (this._debounce) {\n        this._debounce();\n      } else {\n        this.$emit('on-change', newVal);\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/x-input/index.vue"],"names":["Base","Icon","Toast","InlineDesc","isEmail","isMobilePhone","Debounce","mask","validators","fn","msg","str","length","name","created","currentValue","value","undefined","maskValue","process","env","NODE_ENV","title","placeholder","console","warn","required","valid","handleChangeEvent","debounce","_debounce","$emit","beforeMount","$slots","hasRestrictedLabel","hasRightFullHeightSlot","beforeDestroy","cancel","window","removeEventListener","scrollIntoView","mixins","components","props","type","String","default","Number","readonly","Boolean","disabled","keyboard","inlineDesc","isType","Function","min","max","showClear","equalWith","textAlign","autocomplete","autocapitalize","autocorrect","spellcheck","novalidate","iconType","placeholderAlign","labelWidth","shouldToastError","computed","labelStyles","$parent","width","labelWidthComputed","labelAlign","marginRight","labelMarginRight","labelClass","pattern","replace","hasErrors","Object","keys","errors","inputStyle","showWarn","firstError","touched","forceShowError","mounted","addEventListener","methods","time","test","navigator","userAgent","document","activeElement","tagName","setTimeout","$refs","input","scrollIntoViewIfNeeded","onClickErrorIcon","showErrorToast","val","val1","toPattern","reset","dirty","clear","focus","blur","focusHandler","$event","isFocus","onBlur","setTouched","validate","onKeyUp","e","key","target","getError","validateEqual","validator","format","validStatus","equal","willCheck","_getInputMaskSelection","selection","direction","maskVal","loop","lastDirection","maskChar","substr","match","data","hasLengthEqual","watch","newVal","oldVal","selectionStart","$nextTick","selectionEnd"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,IAAP;AACA,OAAOC,IAAP;AACA,OAAOC,KAAP;AACA,OAAOC,UAAP;AAEA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AAEA,OAAOC,QAAP;AAEA,OAAOC,IAAP,MAAiB,gBAAjB;AAEA,IAAMC,UAAU,GAAG;AACjB,WAAS;AACPC,IAAAA,EAAE,EAAEL,OADG;AAEPM,IAAAA,GAAG,EAAE;AAFE,GADQ;AAKjB,kBAAgB;AACdD,IAAAA,EADc,cACVE,GADU,EACL;AACP,aAAON,aAAa,CAACM,GAAD,EAAM,OAAN,CAApB;AACD,KAHa;AAIdD,IAAAA,GAAG,EAAE;AAJS,GALC;AAWjB,gBAAc;AACZD,IAAAA,EADY,cACRE,GADQ,EACH;AACP,aAAOA,GAAG,CAAC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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Base from '../../libs/base'\nimport Icon from '../icon'\nimport Toast from '../toast'\nimport InlineDesc from '../inline-desc'\n\nimport isEmail from 'validator/lib/isEmail'\nimport isMobilePhone from 'validator/lib/isMobilePhone'\n\nimport Debounce from '../../tools/debounce'\n\nimport mask from 'vanilla-masker'\n\nconst validators = {\n  'email': {\n    fn: isEmail,\n    msg: '邮箱格式'\n  },\n  'china-mobile': {\n    fn (str) {\n      return isMobilePhone(str, 'zh-CN')\n    },\n    msg: '手机号码'\n  },\n  'china-name': {\n    fn (str) {\n      return str.length >= 2 && str.length <= 6\n    },\n    msg: '中文姓名'\n  }\n}\nexport default {\n  name: 'x-input',\n  created () {\n    this.currentValue = (this.value === undefined || this.value === null) ? '' : (this.mask ? this.maskValue(this.value) : this.value)\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV === 'development') {\n      if (!this.title && !this.placeholder && !this.currentValue) {\n        console.warn('no title and no placeholder?')\n      }\n    }\n\n    if (this.required && (typeof this.currentValue === 'undefined' || this.currentValue === '')) {\n      this.valid = false\n    }\n    this.handleChangeEvent = true\n    if (this.debounce) {\n      this._debounce = Debounce(() => {\n        this.$emit('on-change', this.currentValue)\n      }, this.debounce)\n    }\n  },\n  beforeMount () {\n    if (this.$slots && this.$slots['restricted-label']) {\n      this.hasRestrictedLabel = true\n    }\n    if (this.$slots && this.$slots['right-full-height']) {\n      this.hasRightFullHeightSlot = true\n    }\n  },\n  beforeDestroy () {\n    if (this._debounce) {\n      this._debounce.cancel()\n    }\n    window.removeEventListener('resize', this.scrollIntoView)\n  },\n  mixins: [Base],\n  components: {\n    Icon,\n    InlineDesc,\n    Toast\n  },\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'text'\n    },\n    placeholder: String,\n    value: [String, Number],\n    name: String,\n    readonly: Boolean,\n    disabled: Boolean,\n    keyboard: String,\n    inlineDesc: String,\n    isType: [String, Function],\n    min: Number,\n    max: Number,\n    showClear: {\n      type: Boolean,\n      default: true\n    },\n    equalWith: String,\n    textAlign: String,\n    // https://github.com/yisibl/blog/issues/3\n    autocomplete: {\n      type: String,\n      default: 'off'\n    },\n    autocapitalize: {\n      type: String,\n      default: 'off'\n    },\n    autocorrect: {\n      type: String,\n      default: 'off'\n    },\n    spellcheck: {\n      type: String,\n      default: 'false'\n    },\n    novalidate: {\n      type: Boolean,\n      default: false\n    },\n    iconType: String,\n    debounce: Number,\n    placeholderAlign: String,\n    labelWidth: String,\n    mask: String,\n    shouldToastError: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    labelStyles () {\n      const {$parent = {}} = this\n      return {\n        width: this.labelWidthComputed || $parent.labelWidth || this.labelWidthComputed,\n        textAlign: $parent.labelAlign,\n        marginRight: $parent.labelMarginRight\n      }\n    },\n    labelClass () {\n      return {\n        'vux-cell-justify': this.$parent && (this.$parent.labelAlign === 'justify' || this.$parent.$parent.labelAlign === 'justify')\n      }\n    },\n    pattern () {\n      if (this.keyboard === 'number' || this.isType === 'china-mobile') {\n        return '[0-9]*'\n      }\n    },\n    labelWidthComputed () {\n      const width = this.title.replace(/[^x00-xff]/g, '00').length / 2 + 1\n      if (width < 10) {\n        return width + 'em'\n      }\n    },\n    hasErrors () {\n      return Object.keys(this.errors).length > 0\n    },\n    inputStyle () {\n      if (this.textAlign) {\n        return {\n          textAlign: this.textAlign\n        }\n      }\n    },\n    showWarn () {\n      return !this.novalidate && !this.equalWith && !this.valid && this.firstError && (this.touched || this.forceShowError)\n    }\n  },\n  mounted () {\n    window.addEventListener('resize', this.scrollIntoView)\n  },\n  methods: {\n    scrollIntoView (time = 0) {\n      // alert('scroll into view')\n      if (/iphone/i.test(navigator.userAgent)) {\n        // return\n      }\n      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') {\n        // alert('will scroll')\n        setTimeout(() => {\n          // alert(this.$refs.input.length)\n          this.$refs.input.scrollIntoViewIfNeeded(true)\n        }, time)\n      }\n    },\n    onClickErrorIcon () {\n      if (this.shouldToastError && this.firstError) {\n        this.showErrorToast = true\n      }\n      this.$emit('on-click-error-icon', this.firstError)\n    },\n    maskValue (val) {\n      const val1 = this.mask ? mask.toPattern(val, this.mask) : val\n      return val1\n    },\n    reset (value = '') {\n      this.dirty = false\n      this.currentValue = value\n      this.firstError = ''\n      this.valid = true\n    },\n    clear () {\n      this.currentValue = ''\n      this.focus()\n      this.$emit('on-click-clear-icon')\n    },\n    focus () {\n      this.$refs.input.focus()\n    },\n    blur () {\n      this.$refs.input.blur()\n    },\n    focusHandler ($event) {\n      this.$emit('on-focus', this.currentValue, $event)\n      this.isFocus = true\n      // this.scrollIntoView(500)\n      // this.scrollIntoView(5000)\n      setTimeout(() => {\n        // 因为有1秒的延迟，如果切换了页面，input已经不存在，所以加个判断\n        !this.$refs.input || this.$refs.input.scrollIntoViewIfNeeded(false)\n        // this.$refs.input.scrollIntoViewIfNeeded()\n      }, 1000)\n      // $event.target.\n    },\n    onBlur ($event) {\n      this.setTouched()\n      this.validate()\n      this.isFocus = false\n      this.$emit('on-blur', this.currentValue, $event)\n    },\n    onKeyUp (e) {\n      if (e.key === 'Enter') {\n        e.target.blur()\n        this.$emit('on-enter', this.currentValue, e)\n      }\n    },\n    getError () {\n      let key = Object.keys(this.errors)[0]\n      this.firstError = this.errors[key]\n    },\n    validate () {\n      if (typeof this.equalWith !== 'undefined') {\n        this.validateEqual()\n        return\n      }\n      this.errors = {}\n\n      if (!this.currentValue && !this.required) {\n        this.valid = true\n        return\n      }\n\n      if (!this.currentValue && this.required) {\n        this.valid = false\n        this.errors.required = '必填哦'\n        this.getError()\n        return\n      }\n\n      if (typeof this.isType === 'string') {\n        const validator = validators[this.isType]\n        if (validator) {\n          let value = this.currentValue\n\n          if (this.isType === 'china-mobile' && this.mask === '999 9999 9999') {\n            value = this.currentValue.replace(/\\s+/g, '')\n          }\n\n          this.valid = validator[ 'fn' ](value)\n          if (!this.valid) {\n            this.forceShowError = true\n            this.errors.format = validator[ 'msg' ] + '格式不对哦~'\n            this.getError()\n            return\n          } else {\n            delete this.errors.format\n          }\n        }\n      }\n\n      if (typeof this.isType === 'function') {\n        const validStatus = this.isType(this.currentValue)\n        this.valid = validStatus.valid\n        if (!this.valid) {\n          this.errors.format = validStatus.msg\n          this.forceShowError = true\n          this.getError()\n          return\n        } else {\n          delete this.errors.format\n        }\n      }\n\n      if (this.min) {\n        if (this.currentValue.length < this.min) {\n          this.errors.min = `最少应该输入${this.min}个字符哦`\n          this.valid = false\n          this.getError()\n          return\n        } else {\n          delete this.errors.min\n        }\n      }\n\n      if (this.max) {\n        if (this.currentValue.length > this.max) {\n          this.errors.max = `最多可以输入${this.max}个字符哦`\n          this.valid = false\n          this.forceShowError = true\n          return\n        } else {\n          this.forceShowError = false\n          delete this.errors.max\n        }\n      }\n\n      this.valid = true\n    },\n    validateEqual () {\n      if (!this.equalWith && this.currentValue) {\n        this.valid = false\n        this.errors.equal = '输入不一致'\n        return\n      }\n      let willCheck = this.dirty || this.currentValue.length >= this.equalWith.length\n      // 只在长度符合时显示正确与否\n      if (willCheck && this.currentValue !== this.equalWith) {\n        this.valid = false\n        this.errors.equal = '输入不一致'\n        return\n      } else {\n        if (!this.currentValue && this.required) {\n          this.valid = false\n        } else {\n          this.valid = true\n          delete this.errors.equal\n        }\n      }\n    },\n    // #2810\n    _getInputMaskSelection (selection, direction, maskVal, loop) {\n      if (!this.mask || (loop && direction === 0)) {\n        return selection\n      }\n      if (direction === 0) {\n        direction = this.lastDirection\n      }\n      if (direction > 0) {\n        const maskChar = this.mask.substr(selection - direction, 1)\n        if (!maskChar.match(/[9SA]/)) {\n          return this._getInputMaskSelection(selection + 1, direction, maskVal, true)\n        }\n      }\n      return selection\n    }\n  },\n  data () {\n    return {\n      hasRightFullHeightSlot: false,\n      hasRestrictedLabel: false,\n      firstError: '',\n      forceShowError: false,\n      hasLengthEqual: false,\n      valid: true,\n      currentValue: '',\n      showErrorToast: false,\n      isFocus: false\n    }\n  },\n  watch: {\n    mask (val) {\n      if (val && this.currentValue) {\n        this.currentValue = this.maskValue(this.currentValue)\n      }\n    },\n    valid () {\n      this.getError()\n    },\n    value (val) {\n      this.currentValue = val\n    },\n    equalWith (newVal) {\n      if (newVal && this.equalWith) {\n        if (newVal.length === this.equalWith.length) {\n          this.hasLengthEqual = true\n        }\n        this.validateEqual()\n      } else {\n        this.validate()\n      }\n    },\n    currentValue (newVal, oldVal) {\n      let selection = null\n      if (!this.equalWith && newVal) {\n        this.validateEqual()\n      }\n      if (newVal && this.equalWith) {\n        if (newVal.length === this.equalWith.length) {\n          this.hasLengthEqual = true\n        }\n        this.validateEqual()\n      } else {\n        this.validate()\n      }\n      // #2960\n      try {\n        selection = this.$refs.input.selectionStart\n        let direction = newVal.length - oldVal.length\n        selection = this._getInputMaskSelection(selection, direction, this.maskValue(newVal))\n        this.lastDirection = direction\n      } catch (e) {}\n      this.$emit('input', this.maskValue(newVal))\n      // #2810\n      this.$nextTick(() => {\n        if (this.$refs.input.selectionStart !== selection) {\n          this.$refs.input.selectionStart = selection\n          this.$refs.input.selectionEnd = selection\n        }\n        if (this.currentValue !== this.maskValue(newVal)) {\n          this.currentValue = this.maskValue(newVal)\n        }\n      })\n\n      if (this._debounce) {\n        this._debounce()\n      } else {\n        this.$emit('on-change', newVal)\n      }\n    }\n  }\n}\n"]}]}