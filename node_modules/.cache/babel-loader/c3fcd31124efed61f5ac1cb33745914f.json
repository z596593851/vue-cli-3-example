{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/previewer/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/previewer/index.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PhotoSwipe from 'x-photoswipe/dist/photoswipe';\nimport UI from 'x-photoswipe/dist/photoswipe-ui-default';\nimport objectAssign from 'object-assign';\nexport default {\n  name: 'previewer',\n  computed: {\n    imgs: function imgs() {\n      return this.list.map(function (one) {\n        if (!one.msrc) {\n          one.msrc = one.src;\n        }\n\n        if (typeof one.w === 'undefined') {\n          one.w = 0;\n          one.h = 0;\n        }\n\n        return one;\n      });\n    }\n  },\n  watch: {\n    imgs: function imgs(newVal, oldVal) {\n      if (!this.photoswipe) {\n        return;\n      }\n\n      if (newVal.length && newVal.length - oldVal.length === -1) {\n        var index = this.photoswipe.getCurrentIndex();\n        this.photoswipe.invalidateCurrItems();\n        this.photoswipe.items.splice(index, 1);\n        var goToIndex = index;\n\n        if (goToIndex > this.photoswipe.items.length - 1) {\n          goToIndex = 0;\n        }\n\n        this.photoswipe.goTo(goToIndex);\n        this.photoswipe.updateSize(true);\n        this.photoswipe.ui.update();\n      } else if (!newVal.length) {\n        this.close();\n      }\n    }\n  },\n  methods: {\n    init: function init(index) {\n      var self = this;\n      var showItem = this.imgs[index];\n\n      if (!showItem.w || !showItem.h || showItem.w < 5 || showItem.h < 5) {\n        var img = new Image();\n\n        img.onload = function () {\n          showItem.w = this.width;\n          showItem.h = this.height;\n          self.doInit(index);\n        };\n\n        img.src = showItem.src;\n      } else {\n        this.doInit(index);\n      }\n    },\n    doInit: function doInit(index) {\n      var _this = this;\n\n      var self = this;\n      var options = objectAssign({\n        history: false,\n        shareEl: false,\n        tapToClose: true,\n        index: index\n      }, this.options);\n      this.photoswipe = new PhotoSwipe(this.$el, UI, this.imgs, options);\n      this.photoswipe.listen('gettingData', function (index, item) {\n        if (!item.w || !item.h || item.w < 1 || item.h < 1) {\n          var img = new Image();\n\n          img.onload = function () {\n            item.w = this.width;\n            item.h = this.height;\n            self.photoswipe.updateSize(true);\n          };\n\n          img.src = item.src;\n        }\n      });\n      this.photoswipe.init();\n      this.photoswipe.listen('close', function () {\n        _this.$emit('on-close');\n      });\n      this.photoswipe.listen('afterChange', function (a, b) {\n        _this.$emit('on-index-change', {\n          currentIndex: _this.photoswipe.getCurrentIndex()\n        });\n      });\n    },\n    show: function show(index) {\n      this.init(index);\n    },\n    getCurrentIndex: function getCurrentIndex() {\n      if (this.photoswipe) {\n        return this.photoswipe.getCurrentIndex();\n      }\n    },\n    close: function close() {\n      this.photoswipe && this.photoswipe.close();\n    },\n    goTo: function goTo(index) {\n      this.photoswipe && this.photoswipe.goTo(index);\n    },\n    prev: function prev() {\n      this.photoswipe && this.photoswipe.prev();\n    },\n    next: function next() {\n      this.photoswipe && this.photoswipe.next();\n    }\n  },\n  props: {\n    list: {\n      type: Array,\n      required: true\n    },\n    index: {\n      type: Number,\n      default: 0\n    },\n    options: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/previewer/index.vue"],"names":["PhotoSwipe","UI","objectAssign","name","computed","imgs","list","map","one","msrc","src","w","h","watch","newVal","oldVal","photoswipe","length","index","getCurrentIndex","invalidateCurrItems","items","splice","goToIndex","goTo","updateSize","ui","update","close","methods","init","self","showItem","img","Image","onload","width","height","doInit","options","history","shareEl","tapToClose","$el","listen","item","$emit","a","b","currentIndex","show","prev","next","props","type","Array","required","Number","default","Object"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PhotoSwipe from 'x-photoswipe/dist/photoswipe'\nimport UI from 'x-photoswipe/dist/photoswipe-ui-default'\nimport objectAssign from 'object-assign'\n\nexport default {\n  name: 'previewer',\n  computed: {\n    imgs () {\n      return this.list.map(one => {\n        if (!one.msrc) {\n          one.msrc = one.src\n        }\n        if (typeof one.w === 'undefined') {\n          one.w = 0\n          one.h = 0\n        }\n        return one\n      })\n    }\n  },\n  watch: {\n    imgs (newVal, oldVal) {\n      if (!this.photoswipe) {\n        return\n      }\n      if (newVal.length && newVal.length - oldVal.length === -1) {\n        const index = this.photoswipe.getCurrentIndex()\n        this.photoswipe.invalidateCurrItems()\n        this.photoswipe.items.splice(index, 1)\n        let goToIndex = index\n        if (goToIndex > this.photoswipe.items.length - 1) {\n          goToIndex = 0\n        }\n        this.photoswipe.goTo(goToIndex)\n        this.photoswipe.updateSize(true)\n        this.photoswipe.ui.update()\n      } else if (!newVal.length) {\n        this.close()\n      }\n    }\n  },\n  methods: {\n    init (index) {\n      const self = this\n      const showItem = this.imgs[index]\n      if (!showItem.w || !showItem.h || showItem.w < 5 || showItem.h < 5) {\n        const img = new Image()\n        img.onload = function () {\n          showItem.w = this.width\n          showItem.h = this.height\n          self.doInit(index)\n        }\n        img.src = showItem.src\n      } else {\n        this.doInit(index)\n      }\n    },\n    doInit (index) {\n      const self = this\n      let options = objectAssign({\n        history: false,\n        shareEl: false,\n        tapToClose: true,\n        index: index\n      }, this.options)\n      this.photoswipe = new PhotoSwipe(this.$el, UI, this.imgs, options)\n\n      this.photoswipe.listen('gettingData', function (index, item) {\n        if (!item.w || !item.h || item.w < 1 || item.h < 1) {\n          const img = new Image()\n          img.onload = function () {\n            item.w = this.width\n            item.h = this.height\n            self.photoswipe.updateSize(true)\n          }\n          img.src = item.src\n        }\n      })\n\n      this.photoswipe.init()\n      this.photoswipe.listen('close', () => {\n        this.$emit('on-close')\n      })\n      this.photoswipe.listen('afterChange', (a, b) => {\n        this.$emit('on-index-change', {\n          currentIndex: this.photoswipe.getCurrentIndex()\n        })\n      })\n    },\n    show (index) {\n      this.init(index)\n    },\n    getCurrentIndex () {\n      if (this.photoswipe) {\n        return this.photoswipe.getCurrentIndex()\n      }\n    },\n    close () {\n      this.photoswipe && this.photoswipe.close()\n    },\n    goTo (index) {\n      this.photoswipe && this.photoswipe.goTo(index)\n    },\n    prev () {\n      this.photoswipe && this.photoswipe.prev()\n    },\n    next () {\n      this.photoswipe && this.photoswipe.next()\n    }\n  },\n  props: {\n    list: {\n      type: Array,\n      required: true\n    },\n    index: {\n      type: Number,\n      default: 0\n    },\n    options: {\n      type: Object,\n      default () {\n        return {}\n      }\n    }\n  }\n}\n"]}]}