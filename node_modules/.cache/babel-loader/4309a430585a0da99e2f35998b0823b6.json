{"remainingRequest":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js!/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/scroller/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/scroller/index.vue","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/js-loader.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/code/js/vue-cli-3-example/node_modules/@vux/loader/src/script-loader.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport objectAssign from 'object-assign';\nimport XScroll from 'vux-xscroll/build/cmd/xscroll.js';\nimport Pulldown from 'vux-xscroll/build/cmd/plugins/pulldown';\nimport Pullup from 'vux-xscroll/build/cmd/plugins/pullup';\n\nvar pulldownDefaultConfig = function pulldownDefaultConfig() {\n  return {\n    content: 'Pull Down To Refresh',\n    height: 60,\n    autoRefresh: false,\n    downContent: 'Pull Down To Refresh',\n    upContent: 'Release To Refresh',\n    loadingContent: 'Loading...',\n    clsPrefix: 'xs-plugin-pulldown-'\n  };\n};\n\nvar pullupDefaultConfig = function pullupDefaultConfig() {\n  return {\n    content: 'Pull Up To Refresh',\n    pullUpHeight: 60,\n    height: 40,\n    autoRefresh: false,\n    downContent: 'Release To Refresh',\n    upContent: 'Pull Up To Refresh',\n    loadingContent: 'Loading...',\n    clsPrefix: 'xs-plugin-pullup-'\n  };\n};\n\nexport default {\n  name: 'scroller',\n  props: {\n    value: {\n      type: Object,\n      default: function _default() {\n        return {\n          pulldownStatus: '',\n          pullupStatus: ''\n        };\n      }\n    },\n    height: String,\n    lockX: Boolean,\n    lockY: Boolean,\n    scrollbarX: Boolean,\n    scrollbarY: Boolean,\n    bounce: {\n      type: Boolean,\n      default: true\n    },\n    useOriginScroll: {\n      type: Boolean,\n      default: false\n    },\n    useTransition: {\n      type: Boolean,\n      default: true\n    },\n    preventDefault: {\n      type: Boolean,\n      default: false\n    },\n    stopPropagation: Boolean,\n    boundryCheck: {\n      type: Boolean,\n      default: true\n    },\n    gpuAcceleration: {\n      type: Boolean,\n      default: true\n    },\n    usePulldown: {\n      type: Boolean,\n      default: false\n    },\n    usePullup: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\n    * refer to: http://xscroll.github.io/node_modules/xscroll/doc/PullDown.html\n    */\n    pulldownConfig: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    pullupConfig: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    enableHorizontalSwiping: {\n      type: Boolean,\n      default: false\n    },\n    scrollBottomOffset: {\n      type: Number,\n      default: 0\n    }\n  },\n  methods: {\n    reset: function reset(scrollPosition, duration, easing) {\n      if (scrollPosition) {\n        if (typeof scrollPosition.left !== 'undefined') {\n          this._xscroll.scrollLeft(scrollPosition.left, duration, easing);\n        }\n\n        if (typeof scrollPosition.top !== 'undefined') {\n          this._xscroll.scrollTop(scrollPosition.top, duration, easing);\n        }\n      }\n\n      this._xscroll && this._xscroll.resetSize();\n    },\n    donePulldown: function donePulldown() {\n      var _this = this;\n\n      this.pulldown.reset(function () {\n        // repaint\n        _this.reset();\n      });\n      this.currentValue.pulldownStatus = 'default';\n    },\n    disablePullup: function disablePullup() {\n      // this._xscroll.unplug(this.pullup)\n      this.pullup.stop();\n      this.currentValue.pullupStatus = 'disabled';\n    },\n    enablePullup: function enablePullup() {\n      this.currentValue.pullupStatus = 'default';\n      this.pullup.restart();\n    },\n    donePullup: function donePullup() {\n      this.pullup.complete();\n      this.reset();\n      this.currentValue.pullupStatus = 'default';\n    },\n    getStyles: function getStyles() {\n      var height = this.height;\n\n      if (!this.height && this.$el && !this.$el.style.height && this.lockX) {\n        height = \"\".concat(document.documentElement.clientHeight, \"px\");\n        this.reset();\n      }\n\n      if (this.height && this.height.indexOf('-') === 0) {\n        height = \"\".concat(document.documentElement.clientHeight + parseInt(this.height), \"px\");\n      }\n\n      this.styles = {\n        height: \"\".concat(height)\n      };\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    if (!this.value) {\n      this.currentValue = {\n        pulldownStatus: '',\n        pullupStatus: ''\n      };\n    } else {\n      this.currentValue = this.value;\n    }\n\n    this.handleOrientationchange = function () {\n      setTimeout(function () {\n        _this2.reset();\n      }, 100);\n    };\n  },\n  data: function data() {\n    return {\n      currentValue: {},\n      styles: {}\n    };\n  },\n  watch: {\n    currentValue: {\n      handler: function handler(val) {\n        this.$emit('input', pure(val));\n      },\n      deep: true\n    },\n    height: function height() {\n      this.getStyles();\n    },\n    value: {\n      handler: function handler(val) {\n        if (val.pullupStatus === 'default' && this.currentValue.pullupStatus !== 'default') {\n          this.donePullup();\n        }\n\n        if (val.pulldownStatus === 'default' && this.currentValue.pulldownStatus !== 'default') {\n          this.donePulldown();\n        }\n\n        if (val.pullupStatus === 'disabled' && this.currentValue.pullupStatus !== 'disabled') {\n          this.disablePullup();\n        }\n\n        if (val.pullupStatus === 'enabled' && this.currentValue.pullupStatus === 'disabled') {\n          this.enablePullup();\n        }\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.uuid = Math.random().toString(36).substring(3, 8);\n    this.$nextTick(function () {\n      _this3.$el.setAttribute('id', \"vux-scroller-\".concat(_this3.uuid));\n\n      var content = null;\n\n      if (_this3.$slots.default) {\n        content = _this3.$slots.default[0].elm;\n      }\n\n      if (!content) {\n        throw new Error('no content is found');\n      }\n\n      _this3._xscroll = new XScroll({\n        renderTo: \"#vux-scroller-\".concat(_this3.uuid),\n        lockX: _this3.lockX,\n        lockY: _this3.lockY,\n        scrollbarX: _this3.scrollbarX,\n        scrollbarY: _this3.scrollbarY,\n        content: content,\n        bounce: _this3.bounce,\n        useOriginScroll: _this3.useOriginScroll,\n        useTransition: _this3.useTransition,\n        preventDefault: _this3.preventDefault,\n        boundryCheck: _this3.boundryCheck,\n        gpuAcceleration: _this3.gpuAcceleration,\n        stopPropagation: _this3.stopPropagation\n      });\n\n      _this3._xscroll.on('scroll', function () {\n        if (_this3._xscroll) {\n          var top = _this3._xscroll.getScrollTop();\n\n          _this3.$emit('on-scroll', {\n            top: top,\n            left: _this3._xscroll.getScrollLeft()\n          });\n\n          var containerHeight = _this3._xscroll.containerHeight;\n          var scrollHeight = _this3._xscroll.height;\n\n          if (top >= containerHeight - scrollHeight - _this3.scrollBottomOffset) {\n            _this3.$emit('on-scroll-bottom');\n          }\n        }\n      });\n\n      if (_this3.usePulldown) {\n        // if use slot=pulldown\n        var container = _this3.$slots.pulldown;\n        var config = objectAssign(pulldownDefaultConfig(), _this3.pulldownConfig);\n\n        if (container) {\n          config.container = container[0].elm;\n        }\n\n        _this3.pulldown = new Pulldown(config);\n\n        _this3._xscroll.plug(_this3.pulldown);\n\n        _this3.pulldown.on('loading', function (e) {\n          _this3.$emit('on-pulldown-loading', _this3.uuid);\n        });\n\n        _this3.pulldown.on('statuschange', function (val) {\n          _this3.currentValue.pulldownStatus = val.newVal;\n        });\n      }\n\n      if (_this3.usePullup) {\n        // if use slot=pullup\n        var _container = _this3.$slots.pullup;\n\n        var _config = objectAssign(pullupDefaultConfig(), _this3.pullupConfig);\n\n        if (_container) {\n          _config.container = _container[0].elm;\n        }\n\n        _this3.pullup = new Pullup(_config);\n\n        _this3._xscroll.plug(_this3.pullup);\n\n        _this3.pullup.on('loading', function (e) {\n          _this3.$emit('on-pullup-loading', _this3.uuid);\n        });\n\n        _this3.pullup.on('statuschange', function (val) {\n          _this3.currentValue.pullupStatus = val.newVal;\n        });\n      }\n\n      if (_this3.enableHorizontalSwiping) {\n        _this3._xscroll.on('panstart', function (e) {\n          if (e.direction === 2 || e.direction === 4) {\n            e.preventDefault();\n\n            if (_this3.scrollbarY) {\n              _this3._xscroll.userConfig.scrollbarY = false;\n            }\n\n            _this3._xscroll.userConfig.lockY = true;\n          }\n        });\n\n        _this3._xscroll.on('panend', function () {\n          if (_this3.scrollbarY) {\n            _this3._xscroll.userConfig.scrollbarY = true;\n          }\n\n          _this3._xscroll.userConfig.lockY = false;\n        });\n      }\n\n      _this3._xscroll.render();\n\n      window.addEventListener('orientationchange', _this3.handleOrientationchange, false);\n    });\n    this.getStyles();\n  },\n  updated: function updated() {\n    this.reset();\n  },\n  destroyed: function destroyed() {\n    if (this.pullup) {\n      this._xscroll.unplug(this.pullup);\n\n      this.pullup.pluginDestructor();\n    }\n\n    if (this.pulldown) {\n      this._xscroll.unplug(this.pulldown);\n\n      this.pulldown.pluginDestructor();\n    }\n\n    window.removeEventListener('orientationchange', this.handleOrientationchange, false);\n\n    this._xscroll.destroy();\n\n    this._xscroll = null;\n  }\n};\n\nfunction pure(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}",{"version":3,"sources":["/Users/apple/code/js/vue-cli-3-example/node_modules/vux/src/components/scroller/index.vue"],"names":["objectAssign","XScroll","Pulldown","Pullup","pulldownDefaultConfig","content","height","autoRefresh","downContent","upContent","loadingContent","clsPrefix","pullupDefaultConfig","pullUpHeight","name","props","value","type","Object","default","pulldownStatus","pullupStatus","String","lockX","Boolean","lockY","scrollbarX","scrollbarY","bounce","useOriginScroll","useTransition","preventDefault","stopPropagation","boundryCheck","gpuAcceleration","usePulldown","usePullup","pulldownConfig","pullupConfig","enableHorizontalSwiping","scrollBottomOffset","Number","methods","reset","scrollPosition","duration","easing","left","_xscroll","scrollLeft","top","scrollTop","resetSize","donePulldown","pulldown","currentValue","disablePullup","pullup","stop","enablePullup","restart","donePullup","complete","getStyles","$el","style","document","documentElement","clientHeight","indexOf","parseInt","styles","created","handleOrientationchange","setTimeout","data","watch","handler","val","$emit","pure","deep","mounted","uuid","Math","random","toString","substring","$nextTick","setAttribute","$slots","elm","Error","renderTo","on","getScrollTop","getScrollLeft","containerHeight","scrollHeight","container","config","plug","e","newVal","direction","userConfig","render","window","addEventListener","updated","destroyed","unplug","pluginDestructor","removeEventListener","destroy","obj","JSON","parse","stringify"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport objectAssign from 'object-assign'\nimport XScroll from 'vux-xscroll/build/cmd/xscroll.js'\nimport Pulldown from 'vux-xscroll/build/cmd/plugins/pulldown'\nimport Pullup from 'vux-xscroll/build/cmd/plugins/pullup'\n\nconst pulldownDefaultConfig = () => ({\n  content: 'Pull Down To Refresh',\n  height: 60,\n  autoRefresh: false,\n  downContent: 'Pull Down To Refresh',\n  upContent: 'Release To Refresh',\n  loadingContent: 'Loading...',\n  clsPrefix: 'xs-plugin-pulldown-'\n})\n\nconst pullupDefaultConfig = () => ({\n  content: 'Pull Up To Refresh',\n  pullUpHeight: 60,\n  height: 40,\n  autoRefresh: false,\n  downContent: 'Release To Refresh',\n  upContent: 'Pull Up To Refresh',\n  loadingContent: 'Loading...',\n  clsPrefix: 'xs-plugin-pullup-'\n})\n\nexport default {\n  name: 'scroller',\n  props: {\n    value: {\n      type: Object,\n      default: () => {\n        return {\n          pulldownStatus: '',\n          pullupStatus: ''\n        }\n      }\n    },\n    height: String,\n    lockX: Boolean,\n    lockY: Boolean,\n    scrollbarX: Boolean,\n    scrollbarY: Boolean,\n    bounce: {\n      type: Boolean,\n      default: true\n    },\n    useOriginScroll: {\n      type: Boolean,\n      default: false\n    },\n    useTransition: {\n      type: Boolean,\n      default: true\n    },\n    preventDefault: {\n      type: Boolean,\n      default: false\n    },\n    stopPropagation: Boolean,\n    boundryCheck: {\n      type: Boolean,\n      default: true\n    },\n    gpuAcceleration: {\n      type: Boolean,\n      default: true\n    },\n    usePulldown: {\n      type: Boolean,\n      default: false\n    },\n    usePullup: {\n      type: Boolean,\n      default: false\n    },\n    /**\n    * refer to: http://xscroll.github.io/node_modules/xscroll/doc/PullDown.html\n    */\n    pulldownConfig: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    pullupConfig: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    enableHorizontalSwiping: {\n      type: Boolean,\n      default: false\n    },\n    scrollBottomOffset: {\n      type: Number,\n      default: 0\n    }\n  },\n  methods: {\n    reset (scrollPosition, duration, easing) {\n      if (scrollPosition) {\n        if (typeof scrollPosition.left !== 'undefined') {\n          this._xscroll.scrollLeft(scrollPosition.left, duration, easing)\n        }\n        if (typeof scrollPosition.top !== 'undefined') {\n          this._xscroll.scrollTop(scrollPosition.top, duration, easing)\n        }\n      }\n      this._xscroll && this._xscroll.resetSize()\n    },\n    donePulldown () {\n      this.pulldown.reset(() => {\n        // repaint\n        this.reset()\n      })\n      this.currentValue.pulldownStatus = 'default'\n    },\n    disablePullup () {\n      // this._xscroll.unplug(this.pullup)\n      this.pullup.stop()\n      this.currentValue.pullupStatus = 'disabled'\n    },\n    enablePullup () {\n      this.currentValue.pullupStatus = 'default'\n      this.pullup.restart()\n    },\n    donePullup () {\n      this.pullup.complete()\n      this.reset()\n      this.currentValue.pullupStatus = 'default'\n    },\n    getStyles () {\n      let height = this.height\n      if (!this.height && (this.$el && !this.$el.style.height) && this.lockX) {\n        height = `${document.documentElement.clientHeight}px`\n        this.reset()\n      }\n\n      if (this.height && this.height.indexOf('-') === 0) {\n        height = `${document.documentElement.clientHeight + parseInt(this.height)}px`\n      }\n      this.styles = {\n        height: `${height}`\n      }\n    }\n  },\n  created () {\n    if (!this.value) {\n      this.currentValue = {\n        pulldownStatus: '',\n        pullupStatus: ''\n      }\n    } else {\n      this.currentValue = this.value\n    }\n    this.handleOrientationchange = () => {\n      setTimeout(() => {\n        this.reset()\n      }, 100)\n    }\n  },\n  data () {\n    return {\n      currentValue: {},\n      styles: {}\n    }\n  },\n  watch: {\n    currentValue: {\n      handler: function (val) {\n        this.$emit('input', pure(val))\n      },\n      deep: true\n    },\n    height () {\n      this.getStyles()\n    },\n    value: {\n      handler: function (val) {\n        if (val.pullupStatus === 'default' && this.currentValue.pullupStatus !== 'default') {\n          this.donePullup()\n        }\n        if (val.pulldownStatus === 'default' && this.currentValue.pulldownStatus !== 'default') {\n          this.donePulldown()\n        }\n        if (val.pullupStatus === 'disabled' && this.currentValue.pullupStatus !== 'disabled') {\n          this.disablePullup()\n        }\n        if (val.pullupStatus === 'enabled' && this.currentValue.pullupStatus === 'disabled') {\n          this.enablePullup()\n        }\n      },\n      deep: true\n    }\n  },\n  mounted () {\n    this.uuid = Math.random().toString(36).substring(3, 8)\n    this.$nextTick(() => {\n      this.$el.setAttribute('id', `vux-scroller-${this.uuid}`)\n      let content = null\n      if (this.$slots.default) {\n        content = this.$slots.default[0].elm\n      }\n      if (!content) {\n        throw new Error('no content is found')\n      }\n\n      this._xscroll = new XScroll({\n        renderTo: `#vux-scroller-${this.uuid}`,\n        lockX: this.lockX,\n        lockY: this.lockY,\n        scrollbarX: this.scrollbarX,\n        scrollbarY: this.scrollbarY,\n        content: content,\n        bounce: this.bounce,\n        useOriginScroll: this.useOriginScroll,\n        useTransition: this.useTransition,\n        preventDefault: this.preventDefault,\n        boundryCheck: this.boundryCheck,\n        gpuAcceleration: this.gpuAcceleration,\n        stopPropagation: this.stopPropagation\n      })\n\n      this._xscroll.on('scroll', () => {\n        if (this._xscroll) {\n          const top = this._xscroll.getScrollTop()\n          this.$emit('on-scroll', {\n            top: top,\n            left: this._xscroll.getScrollLeft()\n          })\n          const containerHeight = this._xscroll.containerHeight\n          const scrollHeight = this._xscroll.height\n          if (top >= containerHeight - scrollHeight - this.scrollBottomOffset) {\n            this.$emit('on-scroll-bottom')\n          }\n        }\n      })\n\n      if (this.usePulldown) {\n        // if use slot=pulldown\n        let container = this.$slots.pulldown\n        let config = objectAssign(pulldownDefaultConfig(), this.pulldownConfig)\n        if (container) {\n          config.container = container[0].elm\n        }\n        this.pulldown = new Pulldown(config)\n        this._xscroll.plug(this.pulldown)\n        this.pulldown.on('loading', (e) => {\n          this.$emit('on-pulldown-loading', this.uuid)\n        })\n        this.pulldown.on('statuschange', (val) => {\n          this.currentValue.pulldownStatus = val.newVal\n        })\n      }\n\n      if (this.usePullup) {\n        // if use slot=pullup\n        let container = this.$slots.pullup\n        let config = objectAssign(pullupDefaultConfig(), this.pullupConfig)\n\n        if (container) {\n          config.container = container[0].elm\n        }\n        this.pullup = new Pullup(config)\n        this._xscroll.plug(this.pullup)\n        this.pullup.on('loading', (e) => {\n          this.$emit('on-pullup-loading', this.uuid)\n        })\n        this.pullup.on('statuschange', (val) => {\n          this.currentValue.pullupStatus = val.newVal\n        })\n      }\n\n      if (this.enableHorizontalSwiping) {\n        this._xscroll.on('panstart', (e) => {\n          if (e.direction === 2 || e.direction === 4) {\n            e.preventDefault()\n            if (this.scrollbarY) {\n              this._xscroll.userConfig.scrollbarY = false\n            }\n            this._xscroll.userConfig.lockY = true\n          }\n        })\n        this._xscroll.on('panend', () => {\n          if (this.scrollbarY) {\n            this._xscroll.userConfig.scrollbarY = true\n          }\n          this._xscroll.userConfig.lockY = false\n        })\n      }\n\n      this._xscroll.render()\n      window.addEventListener('orientationchange', this.handleOrientationchange, false)\n    })\n    this.getStyles()\n  },\n  updated () {\n    this.reset()\n  },\n  destroyed () {\n    if (this.pullup) {\n      this._xscroll.unplug(this.pullup)\n      this.pullup.pluginDestructor()\n    }\n    if (this.pulldown) {\n      this._xscroll.unplug(this.pulldown)\n      this.pulldown.pluginDestructor()\n    }\n    window.removeEventListener('orientationchange', this.handleOrientationchange, false)\n    this._xscroll.destroy()\n    this._xscroll = null\n  }\n}\n\nfunction pure (obj) {\n  return JSON.parse(JSON.stringify(obj))\n}\n"]}]}